[{"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t3", "data": {"contest_mode": false, "banned_by": null, "media_embed": {}, "subreddit": "sysadmin", "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Simple/stupid question but I&amp;#39;ve been curious about it lately.&lt;/p&gt;\n\n&lt;p&gt;I understand SSL certificates and their purpose, and all of our externally facing sites have publicly signed SSL certs installed on them. But other than the security warning, are there any downsides to not installing a publicly validated cert on, say, our Synology NAS&amp;#39; or door access control systems which aren&amp;#39;t open to the internet? My thought no, since both ends of the connection are &amp;quot;trusted&amp;quot; with internal infrastructure so self-signed should be sufficient. I have never seen SSL certs installed on devices like NAS&amp;#39;, etc. but I&amp;#39;ve only ever worked in smaller environments, so that may not be a best practice.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "selftext": "Simple/stupid question but I've been curious about it lately.\n\nI understand SSL certificates and their purpose, and all of our externally facing sites have publicly signed SSL certs installed on them. But other than the security warning, are there any downsides to not installing a publicly validated cert on, say, our Synology NAS' or door access control systems which aren't open to the internet? My thought no, since both ends of the connection are \"trusted\" with internal infrastructure so self-signed should be sufficient. I have never seen SSL certs installed on devices like NAS', etc. but I've only ever worked in smaller environments, so that may not be a best practice.", "likes": null, "suggested_sort": null, "user_reports": [], "secure_media": null, "link_flair_text": null, "id": "65pq97", "gilded": 0, "secure_media_embed": {}, "clicked": false, "score": 60, "report_reasons": null, "author": "DavidPHumes", "saved": false, "mod_reports": [], "name": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "approved_by": null, "over_18": false, "domain": "self.sysadmin", "hidden": false, "thumbnail": "self", "subreddit_id": "t5_2qnp7", "edited": false, "link_flair_css_class": null, "author_flair_css_class": "", "downs": 0, "brand_safe": true, "archived": false, "removal_reason": null, "is_self": true, "hide_score": false, "spoiler": false, "permalink": "/r/sysadmin/comments/65pq97/ssl_certificates_on_internalonly_infrastructure/", "num_reports": null, "locked": false, "stickied": false, "created": 1492386270.0, "url": "https://www.reddit.com/r/sysadmin/comments/65pq97/ssl_certificates_on_internalonly_infrastructure/", "author_flair_text": "IT Manager", "quarantine": false, "title": "SSL certificates on internal-only infrastructure", "created_utc": 1492357470.0, "distinguished": null, "media": null, "upvote_ratio": 0.94, "num_comments": 28, "visited": false, "subreddit_type": "public", "ups": 60}}], "after": null, "before": null}}, {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgcqhn7", "gilded": 0, "archived": false, "score": 5, "report_reasons": null, "author": "jkdjeff", "parent_id": "t1_dgc7zmq", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "Came here to post exactly this. The last place I was at was rife with self-signed certificates on internal resources, and we were constantly telling people \"Oh, just click through that, it's fine.\"\n\nIt made me cringe every time, but there was significant organizational inertia preventing it from getting fixed.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Came here to post exactly this. The last place I was at was rife with self-signed certificates on internal resources, and we were constantly telling people &amp;quot;Oh, just click through that, it&amp;#39;s fine.&amp;quot;&lt;/p&gt;\n\n&lt;p&gt;It made me cringe every time, but there was significant organizational inertia preventing it from getting fixed.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgcqhn7", "score_hidden": false, "stickied": false, "created": 1492413293.0, "created_utc": 1492384493.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 5}}], "after": null, "before": null}}, "user_reports": [], "id": "dgc7zmq", "gilded": 0, "archived": false, "score": 31, "report_reasons": null, "author": "the_spad", "parent_id": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "It trains your staff and users to blindly ignore certificate warnings and to never question what they're *actually* connecting to.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;It trains your staff and users to blindly ignore certificate warnings and to never question what they&amp;#39;re &lt;em&gt;actually&lt;/em&gt; connecting to.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgc7zmq", "score_hidden": false, "stickied": false, "created": 1492388832.0, "created_utc": 1492360032.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 31}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgc7lz6", "gilded": 0, "archived": false, "score": 47, "report_reasons": null, "author": "KarmaAndLies", "parent_id": "t1_dgc6vzq", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "Feel free to reply with a full network map of where you currently work inc hostnames and IP addresses.   \n\nIn general, security is a layered approach, why give the other team any more helpful information than you absolutely need to? Hostnames for all of your internal stuff can give them a good idea of how your network is laid out (giving them targeting clues/social engineering tips).     \n\nAs someone who's attempted to break into a few networks/systems, information leaks are absolutely incredible tools. I am reading your IT support documentation that Google indexed, I am reading your HR onboard handbook, I have your internal telephone directory, I am looking for email addresses to see the username format, I am scanning your subnet, I am looking at response headers from your edge servers, and I am querying up every public DNS record to build a picture of your organisation.     \n\nI strongly suggest you put on a \"black hat\" for a day and go see what information can be gathered about where you work with zero credentials or insider knowledge, you may be surprised. Then consider how you'd leverage the information you just gathered into more access, for example if you find an internal telephone directory can you call people claiming to be \"IT\" and ask for their login for some CMS system you found during your investigative stage?    ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Feel free to reply with a full network map of where you currently work inc hostnames and IP addresses.   &lt;/p&gt;\n\n&lt;p&gt;In general, security is a layered approach, why give the other team any more helpful information than you absolutely need to? Hostnames for all of your internal stuff can give them a good idea of how your network is laid out (giving them targeting clues/social engineering tips).     &lt;/p&gt;\n\n&lt;p&gt;As someone who&amp;#39;s attempted to break into a few networks/systems, information leaks are absolutely incredible tools. I am reading your IT support documentation that Google indexed, I am reading your HR onboard handbook, I have your internal telephone directory, I am looking for email addresses to see the username format, I am scanning your subnet, I am looking at response headers from your edge servers, and I am querying up every public DNS record to build a picture of your organisation.     &lt;/p&gt;\n\n&lt;p&gt;I strongly suggest you put on a &amp;quot;black hat&amp;quot; for a day and go see what information can be gathered about where you work with zero credentials or insider knowledge, you may be surprised. Then consider how you&amp;#39;d leverage the information you just gathered into more access, for example if you find an internal telephone directory can you call people claiming to be &amp;quot;IT&amp;quot; and ask for their login for some CMS system you found during your investigative stage?    &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgc7lz6", "score_hidden": false, "stickied": false, "created": 1492388321.0, "created_utc": 1492359521.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 47}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgcbr3u", "gilded": 0, "archived": false, "score": 6, "report_reasons": null, "author": "ButterCupKhaos", "parent_id": "t1_dgc7bhw", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "I try to avoid using Security through Obscurity as a term, this is recon/enumeration prevention as part of defense in depth. Adding BE hostnames to load balanced SSL certs, giving shares inherited LIST rights, etc all lead to excessive and unnecessary enumeration capabilities. These things are becoming bigger issues as companies move to the cloud and allow Public enumeration on S3/Azure storage blobs and such. Sure you can't access the data since you don't have a authenticated token (yet - it's probably checked into GitHub) but knowing all of your endpoints allows me to perform spear phising campaigns or help craft XSS payloads etc", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I try to avoid using Security through Obscurity as a term, this is recon/enumeration prevention as part of defense in depth. Adding BE hostnames to load balanced SSL certs, giving shares inherited LIST rights, etc all lead to excessive and unnecessary enumeration capabilities. These things are becoming bigger issues as companies move to the cloud and allow Public enumeration on S3/Azure storage blobs and such. Sure you can&amp;#39;t access the data since you don&amp;#39;t have a authenticated token (yet - it&amp;#39;s probably checked into GitHub) but knowing all of your endpoints allows me to perform spear phising campaigns or help craft XSS payloads etc&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgcbr3u", "score_hidden": false, "stickied": false, "created": 1492393750.0, "created_utc": 1492364950.0, "depth": 3, "mod_reports": [], "subreddit_type": "public", "ups": 6}}], "after": null, "before": null}}, "user_reports": [], "id": "dgc7bhw", "gilded": 0, "archived": false, "score": 14, "report_reasons": null, "author": "bluefirecorp", "parent_id": "t1_dgc6vzq", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "Defense in depth. Security through obscurity doesn't work by itself, but it offers a very thin layer of protection.\n\nIt's also nice to be able to trust your own stuff... and some people don't have proper TLDs for their domains (legacy).", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Defense in depth. Security through obscurity doesn&amp;#39;t work by itself, but it offers a very thin layer of protection.&lt;/p&gt;\n\n&lt;p&gt;It&amp;#39;s also nice to be able to trust your own stuff... and some people don&amp;#39;t have proper TLDs for their domains (legacy).&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgc7bhw", "score_hidden": false, "stickied": false, "created": 1492387930.0, "created_utc": 1492359130.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 14}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgcm6f8", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "Xzariner", "parent_id": "t1_dgc6vzq", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "It's a piece of a puzzle. You don't want to give attacker more pieces, that one alone might not help, but combined with others might", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;It&amp;#39;s a piece of a puzzle. You don&amp;#39;t want to give attacker more pieces, that one alone might not help, but combined with others might&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgcm6f8", "score_hidden": false, "stickied": false, "created": 1492407448.0, "created_utc": 1492378648.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dgc6vzq", "gilded": 0, "archived": false, "score": 14, "report_reasons": null, "author": "edneil", "parent_id": "t1_dgc6e9e", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "&gt; lead to leaking information (certificate transparency).\n\nIf people knowing your internal systems hostnames is a significant security risk you are doing something wrong. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;blockquote&gt;\n&lt;p&gt;lead to leaking information (certificate transparency).&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;If people knowing your internal systems hostnames is a significant security risk you are doing something wrong. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgc6vzq", "score_hidden": false, "stickied": false, "created": 1492387345.0, "created_utc": 1492358545.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 14}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgdb0j9", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "GrumpyPenguin", "parent_id": "t1_dgdamt4", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "ADCS can be quick and zero-turnaround-time - if it's configured properly, it can be set up as self-service, and your devs can just request a new cert whenever they need one. \n\nAnything on the domain will trust that cert automatically, but for Android / iOS / Linux / Mac / Non-domain-joined Windows / etc, you'd have to add the domain's CA as a trusted authority on that device (which you could do with bulk provisioning / MDM tools quite easily, assuming they're managed devices). \n\nIf it's just for dev the wildcard is probably not a big deal, but for production purposes, wildcards are [often frowned upon](https://www.sslshopper.com/article-the-risks-in-wildcard-certificates.html) for security and manageability reasons. \n\nBy the way, if your machines are already part of AD, they should have an FQDN already (probably not externally resolvable), e.g. evilgwyns-pc.ad.example.com. Issuing a wildcard certificate for that same domain name (*.ad.example.com) introduces an interesting security hole - someone malicious could potentially use that cert to impersonate signed domain communications, or phish for passwords, etc. To avoid that you'd need to use a different subdomain - e.g. as you said, *.dev.example.com. But you'll need someone to set up DNS aliases for all those dev machines. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;ADCS can be quick and zero-turnaround-time - if it&amp;#39;s configured properly, it can be set up as self-service, and your devs can just request a new cert whenever they need one. &lt;/p&gt;\n\n&lt;p&gt;Anything on the domain will trust that cert automatically, but for Android / iOS / Linux / Mac / Non-domain-joined Windows / etc, you&amp;#39;d have to add the domain&amp;#39;s CA as a trusted authority on that device (which you could do with bulk provisioning / MDM tools quite easily, assuming they&amp;#39;re managed devices). &lt;/p&gt;\n\n&lt;p&gt;If it&amp;#39;s just for dev the wildcard is probably not a big deal, but for production purposes, wildcards are &lt;a href=\"https://www.sslshopper.com/article-the-risks-in-wildcard-certificates.html\"&gt;often frowned upon&lt;/a&gt; for security and manageability reasons. &lt;/p&gt;\n\n&lt;p&gt;By the way, if your machines are already part of AD, they should have an FQDN already (probably not externally resolvable), e.g. evilgwyns-pc.ad.example.com. Issuing a wildcard certificate for that same domain name (*.ad.example.com) introduces an interesting security hole - someone malicious could potentially use that cert to impersonate signed domain communications, or phish for passwords, etc. To avoid that you&amp;#39;d need to use a different subdomain - e.g. as you said, *.dev.example.com. But you&amp;#39;ll need someone to set up DNS aliases for all those dev machines. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgdb0j9", "score_hidden": false, "stickied": false, "created": 1492449640.0, "created_utc": 1492420840.0, "depth": 4, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dgdamt4", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "evilgwyn", "parent_id": "t1_dgd91gc", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "I dunno I'm just looking for ideas really. I'm not an admin I'm just a developer so something workable that I can suggest to the admins. I want a solution that will work with Android and iOS devices seamlessly and has no turnaround time for adding new servers.\n\nThis is more for us Devs to be able to test our software over https with a minimum of hassle than worrying about internal servers.\n\nAlso we different domains for our India, USA Australiaetc branches so it would have to work with them too.\n\nI like the idea of purchasing a cert because I think it should satisfy those requirements and should work just like a cert that our customers would have. I've tried self signed a few different times but they generally failed for one reason or other. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I dunno I&amp;#39;m just looking for ideas really. I&amp;#39;m not an admin I&amp;#39;m just a developer so something workable that I can suggest to the admins. I want a solution that will work with Android and iOS devices seamlessly and has no turnaround time for adding new servers.&lt;/p&gt;\n\n&lt;p&gt;This is more for us Devs to be able to test our software over https with a minimum of hassle than worrying about internal servers.&lt;/p&gt;\n\n&lt;p&gt;Also we different domains for our India, USA Australiaetc branches so it would have to work with them too.&lt;/p&gt;\n\n&lt;p&gt;I like the idea of purchasing a cert because I think it should satisfy those requirements and should work just like a cert that our customers would have. I&amp;#39;ve tried self signed a few different times but they generally failed for one reason or other. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgdamt4", "score_hidden": false, "stickied": false, "created": 1492448298.0, "created_utc": 1492419498.0, "depth": 3, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgd91gc", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "GrumpyPenguin", "parent_id": "t1_dgd3lg0", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "If it's for machines in your domain anyway, why not just set up Active Directory Certificate Services?", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;If it&amp;#39;s for machines in your domain anyway, why not just set up Active Directory Certificate Services?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgd91gc", "score_hidden": false, "stickied": false, "created": 1492443105.0, "created_utc": 1492414305.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgd3lg0", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "evilgwyn", "parent_id": "t1_dgc6e9e", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "Hey\n\nI have a plan where we would purchase a wildcard cert for (say) \\*.dev.example.com. All of the machines in our AD domain would have a name that matches that. They are not visible to the outside world (all on 192.168.\\*). That is to say, inside or network hit foo.dev.example.com it will go to that machine, but from the outside it wouldn't. Can you see any problems with this plan? ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Hey&lt;/p&gt;\n\n&lt;p&gt;I have a plan where we would purchase a wildcard cert for (say) *.dev.example.com. All of the machines in our AD domain would have a name that matches that. They are not visible to the outside world (all on 192.168.*). That is to say, inside or network hit foo.dev.example.com it will go to that machine, but from the outside it wouldn&amp;#39;t. Can you see any problems with this plan? &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgd3lg0", "score_hidden": false, "stickied": false, "created": 1492431593.0, "created_utc": 1492402793.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgc6e9e", "gilded": 0, "archived": false, "score": 45, "report_reasons": null, "author": "bluefirecorp", "parent_id": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "Look at setting up an internal PKI. Using publicly signed certificates for internal infrastructure may lead to leaking information (certificate transparency).\n\nJust having self signed certs randomly leads to easier MiTM attacks.\n\nhttps://github.com/google/easypki", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Look at setting up an internal PKI. Using publicly signed certificates for internal infrastructure may lead to leaking information (certificate transparency).&lt;/p&gt;\n\n&lt;p&gt;Just having self signed certs randomly leads to easier MiTM attacks.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://github.com/google/easypki\"&gt;https://github.com/google/easypki&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgc6e9e", "score_hidden": false, "stickied": false, "created": 1492386681.0, "created_utc": 1492357881.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 45}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgc7n5f", "gilded": 0, "archived": false, "score": 14, "report_reasons": null, "author": "Darkmere", "parent_id": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "We built a CA system for this for internal use a few years back that's held up acceptably.\n\n[Caramel Source](https://github.com/ModioAB/caramel/)\n\nComplete [setup notes](https://gist.github.com/Spindel/814541684acf7486ffb713f9c4ff9870) for container use\n\nSign/list/revoke/Etc certs :  \n`docker exec -ti caramel caramel_tool /srv/webapp/caramel.ini --help` \n\n\n\nBasically, we set up an CA server internally, and all hosts that need certs/auth, hook into this and automatically get them.\n\nAdding a pre-op dependency for each service that needs it to generate it's TLS cert.   And a timer matching that job to refresh the cert as needed.\n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;We built a CA system for this for internal use a few years back that&amp;#39;s held up acceptably.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://github.com/ModioAB/caramel/\"&gt;Caramel Source&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Complete &lt;a href=\"https://gist.github.com/Spindel/814541684acf7486ffb713f9c4ff9870\"&gt;setup notes&lt;/a&gt; for container use&lt;/p&gt;\n\n&lt;p&gt;Sign/list/revoke/Etc certs :&lt;br/&gt;\n&lt;code&gt;docker exec -ti caramel caramel_tool /srv/webapp/caramel.ini --help&lt;/code&gt; &lt;/p&gt;\n\n&lt;p&gt;Basically, we set up an CA server internally, and all hosts that need certs/auth, hook into this and automatically get them.&lt;/p&gt;\n\n&lt;p&gt;Adding a pre-op dependency for each service that needs it to generate it&amp;#39;s TLS cert.   And a timer matching that job to refresh the cert as needed.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgc7n5f", "score_hidden": false, "stickied": false, "created": 1492388366.0, "created_utc": 1492359566.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 14}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgc6m1a", "gilded": 0, "archived": false, "score": 5, "report_reasons": null, "author": "matthewprenger", "parent_id": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "The issue with relying on self signed certs is how do you know if it's the correct cert, or a phony cert from someone hijacking your connection? Unless you're\u200b comparing the hashes, you don't. \n\nThat being said, I don't think it's a huge issue for rarely used internal sites. We only have legit certs on frequently used internal tools. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;The issue with relying on self signed certs is how do you know if it&amp;#39;s the correct cert, or a phony cert from someone hijacking your connection? Unless you&amp;#39;re\u200b comparing the hashes, you don&amp;#39;t. &lt;/p&gt;\n\n&lt;p&gt;That being said, I don&amp;#39;t think it&amp;#39;s a huge issue for rarely used internal sites. We only have legit certs on frequently used internal tools. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgc6m1a", "score_hidden": false, "stickied": false, "created": 1492386969.0, "created_utc": 1492358169.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 5}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgcb3ve", "gilded": 0, "archived": false, "score": 6, "report_reasons": null, "author": "Caleb__", "parent_id": "t1_dgc84rp", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "&gt; just add the MS CA \n\nIn my opinion a thoughtless implemented CA/PKI is worse than a self-signed certificate, because then you give into a false sense of security.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;blockquote&gt;\n&lt;p&gt;just add the MS CA &lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;In my opinion a thoughtless implemented CA/PKI is worse than a self-signed certificate, because then you give into a false sense of security.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgcb3ve", "score_hidden": false, "stickied": false, "created": 1492392907.0, "created_utc": 1492364107.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 6}}], "after": null, "before": null}}, "user_reports": [], "id": "dgc84rp", "gilded": 0, "archived": false, "score": 7, "report_reasons": null, "author": "Fuzzmiester", "parent_id": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "If you're running on windows, you could always just add the MS CA service to a machine.\n\nOr do it with openssl.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;If you&amp;#39;re running on windows, you could always just add the MS CA service to a machine.&lt;/p&gt;\n\n&lt;p&gt;Or do it with openssl.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgc84rp", "score_hidden": false, "stickied": false, "created": 1492389018.0, "created_utc": 1492360218.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 7}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgcifhh", "gilded": 0, "archived": false, "score": 5, "report_reasons": null, "author": "necheffa", "parent_id": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "&gt; But other than the security warning, are there any downsides to not installing a publicly validated cert on, say, our Synology NAS' or door access control systems which aren't open to the internet? \n\nYes and no. The problem isn't that the cert does not have a signature from a big CA the problem is that you are getting a certificate warning and brushing past it. If I set up a proxy service with a self-signed cert and perform a man-in-the-middle on you, would you be able to tell? If you are checking the fingerprints and signatures on the presented certificate manually you can, but if you are just brushing past the warning then you won't.\n\nYou don't need a big CA signature for internal stuff because only machines you control will access the resources. You just need to setup your own PKI for internal use and to push out your internal CA's root certificate to your devices so that you don't get certificate warnings.\nI recommend picking up a copy of Bulletproof SSL and TLS by Ivan Ristic which is a good resource on the subject.\n\nI use a three-tier approach where I create a root CA that is long lived and used to sign intermediate CAs which are short lived. This helps make key distribution a little less painful since I only need to distribute the root CA certificate. The root CA is kept off line and only used to sign intermediate CAs. The intermediate CAs are used to sign actual machine/user certificates. Now, if I need to I can use the root CA to revoke intermediate CAs and the intermediate CAs which are more likely to be compromised help compartmentalize the damage of a compromise since I can still trust the root CA to revoke and reissue intermediate CAs.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;blockquote&gt;\n&lt;p&gt;But other than the security warning, are there any downsides to not installing a publicly validated cert on, say, our Synology NAS&amp;#39; or door access control systems which aren&amp;#39;t open to the internet? &lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Yes and no. The problem isn&amp;#39;t that the cert does not have a signature from a big CA the problem is that you are getting a certificate warning and brushing past it. If I set up a proxy service with a self-signed cert and perform a man-in-the-middle on you, would you be able to tell? If you are checking the fingerprints and signatures on the presented certificate manually you can, but if you are just brushing past the warning then you won&amp;#39;t.&lt;/p&gt;\n\n&lt;p&gt;You don&amp;#39;t need a big CA signature for internal stuff because only machines you control will access the resources. You just need to setup your own PKI for internal use and to push out your internal CA&amp;#39;s root certificate to your devices so that you don&amp;#39;t get certificate warnings.\nI recommend picking up a copy of Bulletproof SSL and TLS by Ivan Ristic which is a good resource on the subject.&lt;/p&gt;\n\n&lt;p&gt;I use a three-tier approach where I create a root CA that is long lived and used to sign intermediate CAs which are short lived. This helps make key distribution a little less painful since I only need to distribute the root CA certificate. The root CA is kept off line and only used to sign intermediate CAs. The intermediate CAs are used to sign actual machine/user certificates. Now, if I need to I can use the root CA to revoke intermediate CAs and the intermediate CAs which are more likely to be compromised help compartmentalize the damage of a compromise since I can still trust the root CA to revoke and reissue intermediate CAs.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgcifhh", "score_hidden": false, "stickied": false, "created": 1492402567.0, "created_utc": 1492373767.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 5}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgdca5s", "gilded": 0, "archived": false, "score": 3, "report_reasons": null, "author": "notmacna", "parent_id": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "Honestly, setting up certificate services isn't very difficult to do. It's not just about avoiding the 'annoying messages in my browser telling me stuff is insecure', as those certificates will have a number of other practical applications.\n\n&gt; since both ends of the connection are \"trusted\" with internal infrastructure\n\nAre they? Are you *sure*?\n\n&gt; I have never seen SSL certs installed on devices like NAS\n\nThat will be because as you say, you've only worked in small environments.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Honestly, setting up certificate services isn&amp;#39;t very difficult to do. It&amp;#39;s not just about avoiding the &amp;#39;annoying messages in my browser telling me stuff is insecure&amp;#39;, as those certificates will have a number of other practical applications.&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;since both ends of the connection are &amp;quot;trusted&amp;quot; with internal infrastructure&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Are they? Are you &lt;em&gt;sure&lt;/em&gt;?&lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;I have never seen SSL certs installed on devices like NAS&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;That will be because as you say, you&amp;#39;ve only worked in small environments.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgdca5s", "score_hidden": false, "stickied": false, "created": 1492453891.0, "created_utc": 1492425091.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 3}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgc6m3g", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "robertito42", "parent_id": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "If it doesn't face the internet, the question is do you trust your PKI infrastructure?", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;If it doesn&amp;#39;t face the internet, the question is do you trust your PKI infrastructure?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgc6m3g", "score_hidden": false, "stickied": false, "created": 1492386971.0, "created_utc": 1492358171.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 2}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgd18fv", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "xxdesmus", "parent_id": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "There's also: \n\nhttps://github.com/cloudflare/cfssl and https://blog.cloudflare.com/introducing-cfssl/", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;There&amp;#39;s also: &lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://github.com/cloudflare/cfssl\"&gt;https://github.com/cloudflare/cfssl&lt;/a&gt; and &lt;a href=\"https://blog.cloudflare.com/introducing-cfssl/\"&gt;https://blog.cloudflare.com/introducing-cfssl/&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgd18fv", "score_hidden": false, "stickied": false, "created": 1492427920.0, "created_utc": 1492399120.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 1}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgcilfl", "gilded": 0, "archived": false, "score": 6, "report_reasons": null, "author": "anomalous_cowherd", "parent_id": "t1_dgcaabs", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "How hard is it to set up the Active Directory Certificate Server, create a couple of intermediate CAs signed by it's root cert, then turn it off? \n\nAfter that you just need to push the new root and intermediate certs out by GPO or however you like, then do a once over for each server to get its own host certificate and you're there.\n\nYes it's a bit of a slog to initially apply it everywhere but it's far from impossible.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;How hard is it to set up the Active Directory Certificate Server, create a couple of intermediate CAs signed by it&amp;#39;s root cert, then turn it off? &lt;/p&gt;\n\n&lt;p&gt;After that you just need to push the new root and intermediate certs out by GPO or however you like, then do a once over for each server to get its own host certificate and you&amp;#39;re there.&lt;/p&gt;\n\n&lt;p&gt;Yes it&amp;#39;s a bit of a slog to initially apply it everywhere but it&amp;#39;s far from impossible.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgcilfl", "score_hidden": false, "stickied": false, "created": 1492402781.0, "created_utc": 1492373981.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 6}}], "after": null, "before": null}}, "user_reports": [], "id": "dgcaabs", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "Caleb__", "parent_id": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 1, "body": "&gt; but I've only ever worked in smaller environments, so that may not be a best practice.\n\nOur environment in 95% Windows. Setting up a secure PKI is not that easy. I am the only sysadmin in a company with 60 people and 100,000 customers. Sure, I could setup a PKI. But because it's not my field, a PKI I set up wouldn't be more secure than simply use a self-signed one and flag the hash in my browser as secure. On top of that, setting up a secure PKI is very time consuming, if you are no expert.", "edited": 1492364012.0, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;blockquote&gt;\n&lt;p&gt;but I&amp;#39;ve only ever worked in smaller environments, so that may not be a best practice.&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Our environment in 95% Windows. Setting up a secure PKI is not that easy. I am the only sysadmin in a company with 60 people and 100,000 customers. Sure, I could setup a PKI. But because it&amp;#39;s not my field, a PKI I set up wouldn&amp;#39;t be more secure than simply use a self-signed one and flag the hash in my browser as secure. On top of that, setting up a secure PKI is very time consuming, if you are no expert.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgcaabs", "score_hidden": false, "stickied": false, "created": 1492391820.0, "created_utc": 1492363020.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 2}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qnp7", "removal_reason": null, "link_id": "t3_65pq97", "likes": null, "replies": "", "user_reports": [], "id": "dgd95vt", "gilded": 0, "archived": false, "score": 4, "report_reasons": null, "author": "Arfman2", "parent_id": "t1_dgd6c3k", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "I've noticed lately this sub is becoming less and less about professionala and more about SoHo admins.\n\nThat being said, you were definitely coming across as pedantic, FYI.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;ve noticed lately this sub is becoming less and less about professionala and more about SoHo admins.&lt;/p&gt;\n\n&lt;p&gt;That being said, you were definitely coming across as pedantic, FYI.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgd95vt", "score_hidden": false, "stickied": false, "created": 1492443464.0, "created_utc": 1492414664.0, "depth": 5, "mod_reports": [], "subreddit_type": "public", "ups": 4}}], "after": null, "before": null}}, "user_reports": [], "id": "dgd6c3k", "gilded": 0, "archived": false, "score": -5, "report_reasons": null, "author": "ryankearney", "parent_id": "t1_dgd3r10", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "Sorry I thought this was a professional subreddit. We should hold ourselves to a higher standard than the layman.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Sorry I thought this was a professional subreddit. We should hold ourselves to a higher standard than the layman.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgd6c3k", "score_hidden": false, "stickied": false, "created": 1492436826.0, "created_utc": 1492408026.0, "depth": 4, "mod_reports": [], "subreddit_type": "public", "ups": -5}}], "after": null, "before": null}}, "user_reports": [], "id": "dgd3r10", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "the_resist_stance", "parent_id": "t1_dgcksrh", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "No need to be a douchebag. Everyone knows what he meant.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;No need to be a douchebag. Everyone knows what he meant.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgd3r10", "score_hidden": false, "stickied": false, "created": 1492431853.0, "created_utc": 1492403053.0, "depth": 3, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dgcksrh", "gilded": 0, "archived": false, "score": -18, "report_reasons": null, "author": "ryankearney", "parent_id": "t1_dgcfs8n", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "And it's still wrong.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;And it&amp;#39;s still wrong.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgcksrh", "score_hidden": false, "stickied": false, "created": 1492405661.0, "created_utc": 1492376861.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": -18}}], "after": null, "before": null}}, "user_reports": [], "id": "dgcfs8n", "gilded": 0, "archived": false, "score": 26, "report_reasons": null, "author": "IdiotManChild", "parent_id": "t1_dgcc91g", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "\"SSL certificate\" is still the colloquial term most often used. No need to get pedantic.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;&amp;quot;SSL certificate&amp;quot; is still the colloquial term most often used. No need to get pedantic.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgcfs8n", "score_hidden": false, "stickied": false, "created": 1492399130.0, "created_utc": 1492370330.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 26}}], "after": null, "before": null}}, "user_reports": [], "id": "dgcc91g", "gilded": 0, "archived": false, "score": -41, "report_reasons": null, "author": "ryankearney", "parent_id": "t3_65pq97", "subreddit_name_prefixed": "r/sysadmin", "controversiality": 0, "body": "&gt; I understand SSL certificates and their purpose\n\nDo you? Because you keep saying SSL certificate. They're X.509 certificates and SSL was marked insecure years ago and replaced over a decade ago by TLS.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;blockquote&gt;\n&lt;p&gt;I understand SSL certificates and their purpose&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Do you? Because you keep saying SSL certificate. They&amp;#39;re X.509 certificates and SSL was marked insecure years ago and replaced over a decade ago by TLS.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "sysadmin", "name": "t1_dgcc91g", "score_hidden": false, "stickied": false, "created": 1492394404.0, "created_utc": 1492365604.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": -41}}], "after": null, "before": null}}]