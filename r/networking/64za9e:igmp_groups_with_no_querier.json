[{"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t3", "data": {"contest_mode": false, "banned_by": null, "media_embed": {}, "subreddit": "networking", "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I think I need to relearn my understanding of igmp snooping.&lt;/p&gt;\n\n&lt;p&gt;I have a test with 4 switches, and a few device plugged into these switches doing multicast communication.  Without ip igmp snooping enabled, I see that multicast traffic reaching a host connected to one of the switches (which we don&amp;#39;t want).&lt;/p&gt;\n\n&lt;p&gt;I planned to enable ip igmp snooping, and then ip igmp snooping querier so they should elect a querier on their own and limit the traffic.&lt;/p&gt;\n\n&lt;p&gt;To my surprise, just by running &amp;quot;ip igmp snooping&amp;quot; on all of the switches, I no longer see the multicast traffic hitting the host.&lt;/p&gt;\n\n&lt;p&gt;Furthermore, I do NOT have a querier. &amp;quot;sh ip igmp sn qu&amp;quot; shows nothing.&lt;/p&gt;\n\n&lt;p&gt;I DO see groups though &amp;quot;sh ip igmp sn gr&amp;quot; shows different groups and ports.&lt;/p&gt;\n\n&lt;p&gt;Can someone explain what is going on or point me in the right direction?  Are the switches themselves smart enough to control some of that traffic WITHOUT a querier?&lt;/p&gt;\n\n&lt;p&gt;All Cisco switches (2960X / IE2000).&lt;/p&gt;\n\n&lt;p&gt;EDIT: Update - we ran &amp;quot;sh ip igmp sn mrouter&amp;quot; and it turns out some random PC was acting as a multicast router.&lt;/p&gt;\n\n&lt;p&gt;From Cisco documentation I found:&lt;/p&gt;\n\n&lt;p&gt;&amp;quot;When there is no multicast router in the VLAN to originate the queries you must configure an IGMP Snooping querier to send membership queries&amp;quot;&lt;/p&gt;\n\n&lt;p&gt;So it seems that just having this device (that is apparently an mRouter) was creating the groups for us, and we did not have to have a querier.&lt;/p&gt;\n\n&lt;p&gt;Followup question: If we have a multicast router (and I don&amp;#39;t really have a grasp of WHAT that is) on the network, then does that mean we DON&amp;#39;T need to have a querier on the network?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "selftext": "I think I need to relearn my understanding of igmp snooping.\n\nI have a test with 4 switches, and a few device plugged into these switches doing multicast communication.  Without ip igmp snooping enabled, I see that multicast traffic reaching a host connected to one of the switches (which we don't want).\n\nI planned to enable ip igmp snooping, and then ip igmp snooping querier so they should elect a querier on their own and limit the traffic.\n\nTo my surprise, just by running \"ip igmp snooping\" on all of the switches, I no longer see the multicast traffic hitting the host.\n\nFurthermore, I do NOT have a querier. \"sh ip igmp sn qu\" shows nothing.\n\nI DO see groups though \"sh ip igmp sn gr\" shows different groups and ports.\n\nCan someone explain what is going on or point me in the right direction?  Are the switches themselves smart enough to control some of that traffic WITHOUT a querier?\n\nAll Cisco switches (2960X / IE2000).\n\nEDIT: Update - we ran \"sh ip igmp sn mrouter\" and it turns out some random PC was acting as a multicast router.\n\nFrom Cisco documentation I found:\n\n\"When there is no multicast router in the VLAN to originate the queries you must configure an IGMP Snooping querier to send membership queries\"\n\nSo it seems that just having this device (that is apparently an mRouter) was creating the groups for us, and we did not have to have a querier.\n\nFollowup question: If we have a multicast router (and I don't really have a grasp of WHAT that is) on the network, then does that mean we DON'T need to have a querier on the network?", "likes": null, "suggested_sort": null, "user_reports": [], "secure_media": null, "link_flair_text": null, "id": "64za9e", "gilded": 0, "secure_media_embed": {}, "clicked": false, "score": 8, "report_reasons": null, "author": "bwassell", "saved": false, "mod_reports": [], "name": "t3_64za9e", "subreddit_name_prefixed": "r/networking", "approved_by": null, "over_18": false, "domain": "self.networking", "hidden": false, "thumbnail": "", "subreddit_id": "t5_2qkaf", "edited": 1492016104.0, "link_flair_css_class": null, "author_flair_css_class": null, "downs": 0, "brand_safe": true, "archived": false, "removal_reason": null, "is_self": true, "hide_score": false, "spoiler": false, "permalink": "/r/networking/comments/64za9e/igmp_groups_with_no_querier/", "num_reports": null, "locked": false, "stickied": false, "created": 1492043799.0, "url": "https://www.reddit.com/r/networking/comments/64za9e/igmp_groups_with_no_querier/", "author_flair_text": null, "quarantine": false, "title": "igmp groups with no querier?", "created_utc": 1492014999.0, "distinguished": null, "media": null, "upvote_ratio": 0.76, "num_comments": 3, "visited": false, "subreddit_type": "public", "ups": 8}}], "after": null, "before": null}}, {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_64za9e", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_64za9e", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_64za9e", "likes": null, "replies": "", "user_reports": [], "id": "dg663nt", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "kWV0XhdO", "parent_id": "t1_dg65ktl", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "In Cisco-land, a multicast router *always* becomes a candidate IGMP querier. In fact, I've never seen an implementation of PIM that didn't go hand-in-hand with IGMP, though I suppose it's possible.\n\nA router is more than you need, but it's enough.\n\nRealistically, all you need is a single IGMP frame on the lan every minute or so. You could craft one up in scapy or record an proxied IGMP query and play it back endlessly with `tcpreplay`\n\nIt sounds like you're all set. Think about whether you care about redundancy.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;In Cisco-land, a multicast router &lt;em&gt;always&lt;/em&gt; becomes a candidate IGMP querier. In fact, I&amp;#39;ve never seen an implementation of PIM that didn&amp;#39;t go hand-in-hand with IGMP, though I suppose it&amp;#39;s possible.&lt;/p&gt;\n\n&lt;p&gt;A router is more than you need, but it&amp;#39;s enough.&lt;/p&gt;\n\n&lt;p&gt;Realistically, all you need is a single IGMP frame on the lan every minute or so. You could craft one up in scapy or record an proxied IGMP query and play it back endlessly with &lt;code&gt;tcpreplay&lt;/code&gt;&lt;/p&gt;\n\n&lt;p&gt;It sounds like you&amp;#39;re all set. Think about whether you care about redundancy.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg663nt", "score_hidden": false, "stickied": false, "created": 1492045405.0, "created_utc": 1492016605.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dg65ktl", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "bwassell", "parent_id": "t1_dg655c0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I am going to post an update, but we ran \"sh ip igmp sn mrouter\" and it turns out some random PC was acting as a multicast router.  From Cisco documentation I found:\n\n\"When there is no multicast router in the VLAN to originate the queries you must configure an IGMP Snooping querier to send membership queries\"\n\nSo it seems that just having this device (that is apparently an mRouter) was creating the groups for us, and we did not have to have a querier.\n\nFollowup question: If we have a multicast router (and I don't really have a grasp of WHAT that is) on the network, then does that mean we DON'T need to have a querier on the network?", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I am going to post an update, but we ran &amp;quot;sh ip igmp sn mrouter&amp;quot; and it turns out some random PC was acting as a multicast router.  From Cisco documentation I found:&lt;/p&gt;\n\n&lt;p&gt;&amp;quot;When there is no multicast router in the VLAN to originate the queries you must configure an IGMP Snooping querier to send membership queries&amp;quot;&lt;/p&gt;\n\n&lt;p&gt;So it seems that just having this device (that is apparently an mRouter) was creating the groups for us, and we did not have to have a querier.&lt;/p&gt;\n\n&lt;p&gt;Followup question: If we have a multicast router (and I don&amp;#39;t really have a grasp of WHAT that is) on the network, then does that mean we DON&amp;#39;T need to have a querier on the network?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg65ktl", "score_hidden": false, "stickied": false, "created": 1492044870.0, "created_utc": 1492016070.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dg655c0", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "kWV0XhdO", "parent_id": "t3_64za9e", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "A multicast subscriber application (the OS, really) sends an *unsolicited* IGMP host report when it starts up. This makes sense, right? You want the traffic right away on startup, instead of waiting around for the querier to ask you about it.\n\nDon't expect to see another report without a querier.\n\nSo, the question becomes: How long will your IGMP snooping switch remember that host report? Will he time you out? What if the topology changes?\n\nGet a querier on that segment.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;A multicast subscriber application (the OS, really) sends an &lt;em&gt;unsolicited&lt;/em&gt; IGMP host report when it starts up. This makes sense, right? You want the traffic right away on startup, instead of waiting around for the querier to ask you about it.&lt;/p&gt;\n\n&lt;p&gt;Don&amp;#39;t expect to see another report without a querier.&lt;/p&gt;\n\n&lt;p&gt;So, the question becomes: How long will your IGMP snooping switch remember that host report? Will he time you out? What if the topology changes?&lt;/p&gt;\n\n&lt;p&gt;Get a querier on that segment.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg655c0", "score_hidden": false, "stickied": false, "created": 1492044421.0, "created_utc": 1492015621.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}]