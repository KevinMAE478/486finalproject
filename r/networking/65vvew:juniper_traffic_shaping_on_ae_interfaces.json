[{"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t3", "data": {"contest_mode": false, "banned_by": null, "media_embed": {}, "subreddit": "networking", "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;We are an ISP with a large mix of internet customers ranging from 10Mbps to 40 Gbps.&lt;/p&gt;\n\n&lt;p&gt;Our IP routers have 4x10G interfaces. The problem is when you traffic-shape an ae interface depending on how many interfaces are in the LAG you need that many flows to obtain full throughput.&lt;/p&gt;\n\n&lt;p&gt;This creates an issue with customers doing anything with single flows (i.e. VPNs). So a 100m customer will only see 25m on a VPN tunnel to another site.&lt;/p&gt;\n\n&lt;p&gt;We also receive a lot of &amp;#39;speed complaints&amp;#39; with customers running speed tests and not seeing their contract bandwidth. Most of our customers are not technical so it is difficult to explain the flow issue or to have them do iperf testing. The customers we have walked through to set up iperf tests showed they are able to get the bandwidth they pay for.&lt;/p&gt;\n\n&lt;p&gt;You can change the replication mode, but this allows 4x the bandwidth for a customer.&lt;/p&gt;\n\n&lt;p&gt;Our temp solution is a single 10G interface and we move customers to that interface when they open a ticket. I don&amp;#39;t like this solution, because those customers now have no port redundancy. Sure we could have a backup LAG member however that takes away another interface on the router.  &lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m curious to see if anyone has a workaround to this issue.&lt;/p&gt;\n\n&lt;p&gt;Maybe the solution is we need to buy 40G/100G cards with a backup LAG member (I do not see the company spending the money to do this).&lt;/p&gt;\n\n&lt;p&gt;This seems like a large issue to me. Juniper actually is aware of it (KB22921), but don&amp;#39;t see anything suggesting it will be fixed.&lt;/p&gt;\n\n&lt;p&gt;Edit: &lt;a href=\"http://imgur.com/a/3wjaY\"&gt;Diagram&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "selftext": "We are an ISP with a large mix of internet customers ranging from 10Mbps to 40 Gbps.\n\nOur IP routers have 4x10G interfaces. The problem is when you traffic-shape an ae interface depending on how many interfaces are in the LAG you need that many flows to obtain full throughput.\n\nThis creates an issue with customers doing anything with single flows (i.e. VPNs). So a 100m customer will only see 25m on a VPN tunnel to another site.\n\nWe also receive a lot of 'speed complaints' with customers running speed tests and not seeing their contract bandwidth. Most of our customers are not technical so it is difficult to explain the flow issue or to have them do iperf testing. The customers we have walked through to set up iperf tests showed they are able to get the bandwidth they pay for.\n\nYou can change the replication mode, but this allows 4x the bandwidth for a customer.\n\nOur temp solution is a single 10G interface and we move customers to that interface when they open a ticket. I don't like this solution, because those customers now have no port redundancy. Sure we could have a backup LAG member however that takes away another interface on the router.  \n\nI'm curious to see if anyone has a workaround to this issue.\n\nMaybe the solution is we need to buy 40G/100G cards with a backup LAG member (I do not see the company spending the money to do this).\n\nThis seems like a large issue to me. Juniper actually is aware of it (KB22921), but don't see anything suggesting it will be fixed.\n\nEdit: [Diagram](http://imgur.com/a/3wjaY)", "likes": null, "suggested_sort": null, "user_reports": [], "secure_media": null, "link_flair_text": null, "id": "65vvew", "gilded": 0, "secure_media_embed": {}, "clicked": false, "score": 8, "report_reasons": null, "author": "pseudowire", "saved": false, "mod_reports": [], "name": "t3_65vvew", "subreddit_name_prefixed": "r/networking", "approved_by": null, "over_18": false, "domain": "self.networking", "hidden": false, "thumbnail": "", "subreddit_id": "t5_2qkaf", "edited": 1492471132.0, "link_flair_css_class": null, "author_flair_css_class": "", "downs": 0, "brand_safe": true, "archived": false, "removal_reason": null, "is_self": true, "hide_score": false, "spoiler": false, "permalink": "/r/networking/comments/65vvew/juniper_traffic_shaping_on_ae_interfaces/", "num_reports": null, "locked": false, "stickied": false, "created": 1492468206.0, "url": "https://www.reddit.com/r/networking/comments/65vvew/juniper_traffic_shaping_on_ae_interfaces/", "author_flair_text": "Meowjesty", "quarantine": false, "title": "Juniper traffic shaping on ae interfaces", "created_utc": 1492439406.0, "distinguished": null, "media": null, "upvote_ratio": 0.71, "num_comments": 23, "visited": false, "subreddit_type": "public", "ups": 8}}], "after": null, "before": null}}, {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": "", "user_reports": [], "id": "dgdwx41", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "Torgen_Chickenvald", "parent_id": "t1_dgds3t0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Okay, I can see that making sense given your topology and SLA requirements. I was under the impression that in Junos you can only police (no shaping) on an AE so I did a little reading and sure enough, I see what you're describing. Interesting stuff. Sorry I can't offer any advice to fix your particular situation but thanks for teaching me something new! ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Okay, I can see that making sense given your topology and SLA requirements. I was under the impression that in Junos you can only police (no shaping) on an AE so I did a little reading and sure enough, I see what you&amp;#39;re describing. Interesting stuff. Sorry I can&amp;#39;t offer any advice to fix your particular situation but thanks for teaching me something new! &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgdwx41", "score_hidden": false, "stickied": false, "created": 1492483485.0, "created_utc": 1492454685.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 2}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": "", "user_reports": [], "id": "dgeivs1", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "pseudowire", "parent_id": "t1_dgehyma", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Normally when I think of a policer I think of something on the input side. As I said to u/Firebirdnz I never considered an output-policer. However, it is probably something I'll chew on for a bit and play with in the lab now.\n\nI do have scheduling in the core. I however do not have drop-profiles. Though I anticipating someday they may be needed and did add high and low PLP values for best-effort and bronze queues. \n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Normally when I think of a policer I think of something on the input side. As I said to &lt;a href=\"/u/Firebirdnz\"&gt;u/Firebirdnz&lt;/a&gt; I never considered an output-policer. However, it is probably something I&amp;#39;ll chew on for a bit and play with in the lab now.&lt;/p&gt;\n\n&lt;p&gt;I do have scheduling in the core. I however do not have drop-profiles. Though I anticipating someday they may be needed and did add high and low PLP values for best-effort and bronze queues. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgeivs1", "score_hidden": false, "stickied": false, "created": 1492510092.0, "created_utc": 1492481292.0, "depth": 7, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgehyma", "gilded": 0, "archived": false, "score": 3, "report_reasons": null, "author": "error404", "parent_id": "t1_dgeezbo", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "&gt; Where would I police a customer's traffic instead of shape? Where the IP and MPLS connect? If so what If I get a 40G DDoS?\n\nThe same place you're currently applying a shaper. So right now on the interface you're applying a tc profile or whatever, instead you'd apply `interfaces ae0 unit 100 layer2-policer output-policer limit-100m`, and configure the appropriate policer to either discard or mark as excess for the shaper to discard only during congestion. I'm not quite clear where this is right now, but if it works with shaping, it will work with egress policing. I would put this between your Internet edge and MPLS on the respective egress sides (though AFAICT you shouldn't need this between the customer and the Internet, since I assume they are bandwidth limited at the edge already), or if they are one and the same, on the egress into the l2circuit. Keep in mind that no matter what you do, you can't control what your upstream(s) send to you, so if you have 40Gbps of traffic hitting you on a 10Gbps transit link, you're going to take hits no matter what.\n\nYou still need scheduling inside the core, but generally it would be directly on the physical interface, and exists to choose which packets to discard and which to bump up the queue when there is congestion (ideally never ;)). In general, CoS and scheduling features are there to guarantee quality of service, not to handle commits and rate limiting, while policers are there to handle the latter, particularly where you don't have control over the packets being sent to you (ie. ingress on the edge).", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;blockquote&gt;\n&lt;p&gt;Where would I police a customer&amp;#39;s traffic instead of shape? Where the IP and MPLS connect? If so what If I get a 40G DDoS?&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;The same place you&amp;#39;re currently applying a shaper. So right now on the interface you&amp;#39;re applying a tc profile or whatever, instead you&amp;#39;d apply &lt;code&gt;interfaces ae0 unit 100 layer2-policer output-policer limit-100m&lt;/code&gt;, and configure the appropriate policer to either discard or mark as excess for the shaper to discard only during congestion. I&amp;#39;m not quite clear where this is right now, but if it works with shaping, it will work with egress policing. I would put this between your Internet edge and MPLS on the respective egress sides (though AFAICT you shouldn&amp;#39;t need this between the customer and the Internet, since I assume they are bandwidth limited at the edge already), or if they are one and the same, on the egress into the l2circuit. Keep in mind that no matter what you do, you can&amp;#39;t control what your upstream(s) send to you, so if you have 40Gbps of traffic hitting you on a 10Gbps transit link, you&amp;#39;re going to take hits no matter what.&lt;/p&gt;\n\n&lt;p&gt;You still need scheduling inside the core, but generally it would be directly on the physical interface, and exists to choose which packets to discard and which to bump up the queue when there is congestion (ideally never ;)). In general, CoS and scheduling features are there to guarantee quality of service, not to handle commits and rate limiting, while policers are there to handle the latter, particularly where you don&amp;#39;t have control over the packets being sent to you (ie. ingress on the edge).&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgehyma", "score_hidden": false, "stickied": false, "created": 1492508996.0, "created_utc": 1492480196.0, "depth": 6, "mod_reports": [], "subreddit_type": "public", "ups": 3}}], "after": null, "before": null}}, "user_reports": [], "id": "dgeezbo", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "pseudowire", "parent_id": "t1_dgebzh8", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I don't have a good reason why other than we don't want a DDoS to customer A to impact customer B, C, D and E.\n\nWhere would I police a customer's traffic instead of shape? Where the IP and MPLS connect? If so what If I get a 40G DDoS?\n\nWith the shapers we can fully handle a large DDoS. If I used a policer instead it would saturate my links. For example the 4x10G between the IP network and MPLS network. It would become completely clogged and impact several hundreds of customers. \n\nI completely understand what you are saying and it makes sense. Internet and WAN service I classify now as best-effort with low priority on the MPLS core and only allot 20% to the queue before it goes out of profile. I think my CoS in the core would fully handle the prioritizing/scheduling of traffic correctly. However, its never been stressed since I pushed out the configuration. To date I don't think you could find a interface in the MPLS core with drops on it.\n\nWe've only recently convinced the higher ups its time to move to traffic engineering and RSVP in the core. Which is why I can't quite rely on CBF or LSP mapping/policing yet. Everything is LDP with the exception of a few strict ERO RSVP sessions to keep some SLAs below a certain latency. \n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I don&amp;#39;t have a good reason why other than we don&amp;#39;t want a DDoS to customer A to impact customer B, C, D and E.&lt;/p&gt;\n\n&lt;p&gt;Where would I police a customer&amp;#39;s traffic instead of shape? Where the IP and MPLS connect? If so what If I get a 40G DDoS?&lt;/p&gt;\n\n&lt;p&gt;With the shapers we can fully handle a large DDoS. If I used a policer instead it would saturate my links. For example the 4x10G between the IP network and MPLS network. It would become completely clogged and impact several hundreds of customers. &lt;/p&gt;\n\n&lt;p&gt;I completely understand what you are saying and it makes sense. Internet and WAN service I classify now as best-effort with low priority on the MPLS core and only allot 20% to the queue before it goes out of profile. I think my CoS in the core would fully handle the prioritizing/scheduling of traffic correctly. However, its never been stressed since I pushed out the configuration. To date I don&amp;#39;t think you could find a interface in the MPLS core with drops on it.&lt;/p&gt;\n\n&lt;p&gt;We&amp;#39;ve only recently convinced the higher ups its time to move to traffic engineering and RSVP in the core. Which is why I can&amp;#39;t quite rely on CBF or LSP mapping/policing yet. Everything is LDP with the exception of a few strict ERO RSVP sessions to keep some SLAs below a certain latency. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgeezbo", "score_hidden": false, "stickied": false, "created": 1492505324.0, "created_utc": 1492476524.0, "depth": 5, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgebzh8", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "error404", "parent_id": "t1_dgeaum9", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I think I understood what you were doing, just not *why*. If I understand correctly, you're afraid of excess traffic coming from the Internet pushing out other MPLS traffic and causing SLA hits. In most networks with this kind of topology, you'd set your Internet traffic to highest (or perhaps your EIR MPLS traffic gets dropped first) loss priority, so in congestion those packets take the hit in the single interface shaper. You are, of course, still taking the risk that customer X's DDoS affects customer Y's DIA, but SLAs are usually not that strong on DIA for exactly this reason, and your slower DDoS mitigation methods (be it manual or some automated system to blackhole the target or whatever) will ultimately take care of it.\n\nSo that would be the 'normal' setup in your scenario. Which is why I kind of ignored the implication that obviously a 100m shaper isn't configured for the whole 10G, but that normally shaping on a core ae interface wouldn't run into this issue, since the shaper would be configured to handle queueing against the physical interfaces, not to manage bandwidth for each circuit across the bundle. Shapers are primarily to control queueing and decide which packets to drop, not enforce bandwidth guarantees.\n\nI guess what you're wanting is some stronger guarantee that customer X can't generate more than their CIR of traffic on your MPLS. This is an application where you would typically use policers, and this is easy to configure and works fine on ae. Depending on your MPLS design, you might even be able to make use of the auto-policer feature. I'm not sure why you're discounting these options, since shaping doesn't seem to be appropriate for your use case, and indeed, this platform limitation doesn't have a workaround other than moving the shaping elsewhere or using policing instead.", "edited": 1492473379.0, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I think I understood what you were doing, just not &lt;em&gt;why&lt;/em&gt;. If I understand correctly, you&amp;#39;re afraid of excess traffic coming from the Internet pushing out other MPLS traffic and causing SLA hits. In most networks with this kind of topology, you&amp;#39;d set your Internet traffic to highest (or perhaps your EIR MPLS traffic gets dropped first) loss priority, so in congestion those packets take the hit in the single interface shaper. You are, of course, still taking the risk that customer X&amp;#39;s DDoS affects customer Y&amp;#39;s DIA, but SLAs are usually not that strong on DIA for exactly this reason, and your slower DDoS mitigation methods (be it manual or some automated system to blackhole the target or whatever) will ultimately take care of it.&lt;/p&gt;\n\n&lt;p&gt;So that would be the &amp;#39;normal&amp;#39; setup in your scenario. Which is why I kind of ignored the implication that obviously a 100m shaper isn&amp;#39;t configured for the whole 10G, but that normally shaping on a core ae interface wouldn&amp;#39;t run into this issue, since the shaper would be configured to handle queueing against the physical interfaces, not to manage bandwidth for each circuit across the bundle. Shapers are primarily to control queueing and decide which packets to drop, not enforce bandwidth guarantees.&lt;/p&gt;\n\n&lt;p&gt;I guess what you&amp;#39;re wanting is some stronger guarantee that customer X can&amp;#39;t generate more than their CIR of traffic on your MPLS. This is an application where you would typically use policers, and this is easy to configure and works fine on ae. Depending on your MPLS design, you might even be able to make use of the auto-policer feature. I&amp;#39;m not sure why you&amp;#39;re discounting these options, since shaping doesn&amp;#39;t seem to be appropriate for your use case, and indeed, this platform limitation doesn&amp;#39;t have a workaround other than moving the shaping elsewhere or using policing instead.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgebzh8", "score_hidden": false, "stickied": false, "created": 1492501530.0, "created_utc": 1492472730.0, "depth": 4, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgeaum9", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "pseudowire", "parent_id": "t1_dge7e77", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I think part of the confusion comes from how we treat the networks and we not doing something you would normally see. The IP network does not do MPLS at all and we treat it as a customer of the MPLS network. No policing happens on the IP termination router. I\u2019ve included a diagram to the original post.\n\nYou are not setting a 100m shaper on a 10G link. You are shaping a logical interface. I might have 500 customers on a LAG. Every logical interface can be shaped independently Some are 5Gbps, 1Gbps, 100Mbps, 10Mbps etc. The 4x10G LAG is oversubscribed. We are shaping the traffic before it ever touches the core network.\n\nI recently did a complete overhaul on our CoS design and used only transmit-rate to allow a queue to use more bandwidth if the resources were available. I guess I could throw say shaping-rate 50% on the best-effort queue and stop shaping completely on the MX. Allow us to push the shaping back to the CPE device. I just don't see management allowing that to happen. For a while we got burned pretty bad with SLAs, because of DDoS attacks and CoS on the MPLS core not being up to snuff.\n\nI am aware of CBF and LSP policing. Neither are really an option right now. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I think part of the confusion comes from how we treat the networks and we not doing something you would normally see. The IP network does not do MPLS at all and we treat it as a customer of the MPLS network. No policing happens on the IP termination router. I\u2019ve included a diagram to the original post.&lt;/p&gt;\n\n&lt;p&gt;You are not setting a 100m shaper on a 10G link. You are shaping a logical interface. I might have 500 customers on a LAG. Every logical interface can be shaped independently Some are 5Gbps, 1Gbps, 100Mbps, 10Mbps etc. The 4x10G LAG is oversubscribed. We are shaping the traffic before it ever touches the core network.&lt;/p&gt;\n\n&lt;p&gt;I recently did a complete overhaul on our CoS design and used only transmit-rate to allow a queue to use more bandwidth if the resources were available. I guess I could throw say shaping-rate 50% on the best-effort queue and stop shaping completely on the MX. Allow us to push the shaping back to the CPE device. I just don&amp;#39;t see management allowing that to happen. For a while we got burned pretty bad with SLAs, because of DDoS attacks and CoS on the MPLS core not being up to snuff.&lt;/p&gt;\n\n&lt;p&gt;I am aware of CBF and LSP policing. Neither are really an option right now. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgeaum9", "score_hidden": false, "stickied": false, "created": 1492500070.0, "created_utc": 1492471270.0, "depth": 3, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dge7e77", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "error404", "parent_id": "t1_dgds3t0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I'm still not quite understanding the purpose of these ae shapers. Typically in the core you would have shaping-rate set to (close to) the link bandwidth and use queues to prioritize/discard traffic. I don't see why you have set a 100m shaper on a 10G link. You should limit customer bandwidth at the edge of the network, and tag traffic into the appropriate queues there for CoS within the core where your shapers will priority-queue it or drop it in congestion as appropriate based on your service level guarantees and etc. If you really need to limit the bandwidth in the core, use a policer, which will work fine on ae.\n\nThere are also robust mechanisms for policing the LSPs themselves, which would probably be most appropriate.", "edited": 1492467088.0, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m still not quite understanding the purpose of these ae shapers. Typically in the core you would have shaping-rate set to (close to) the link bandwidth and use queues to prioritize/discard traffic. I don&amp;#39;t see why you have set a 100m shaper on a 10G link. You should limit customer bandwidth at the edge of the network, and tag traffic into the appropriate queues there for CoS within the core where your shapers will priority-queue it or drop it in congestion as appropriate based on your service level guarantees and etc. If you really need to limit the bandwidth in the core, use a policer, which will work fine on ae.&lt;/p&gt;\n\n&lt;p&gt;There are also robust mechanisms for policing the LSPs themselves, which would probably be most appropriate.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dge7e77", "score_hidden": false, "stickied": false, "created": 1492495579.0, "created_utc": 1492466779.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dgds3t0", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "pseudowire", "parent_id": "t1_dgdpux6", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "We do not rate-limt at the ae only traffic shape. Rate-limiting is done at the customer CPE.\n\nWe have a national MPLS network most links are 10G, but we have recently added a 20G core through parts of the network. The IP network is a 'customer' of the MPLS network. We purchase bulk transit around the United States and only maintain IP routers that terminate customers at those locations.\n\nA customer's Internet is backhauled if you will with a l2circuit via the MPLS network to the nearest IP router. This is because its cheaper for us to have ~10 routers than ~200 (one for every POP).\n\nThe MPLS network is shared between all services. We carry VoIP, Video, 911 PSAPs, cell tower backhaul, and both commercial and residential internet. Residential users and schools are the usual targets for DDoS attacks. If we were to shape at the edge we run the risk of pushing a DDoS further into the network and saturating links. The problem becomes SLA violations then.\n\nWe have Arbor to auto mitigate DDoS events, but even a second of a 10G DDoS can violate some SLAs.\n\nEdit: This probably raises the question of does CoS fix the issue. While I have deployed CoS through the MPLS core network and access network, with important/higher SLAs in a higher priority queue, I don't think that is enough to sway the idea of not shaping at the IP termination vs the edge CPE.", "edited": 1492450087.0, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;We do not rate-limt at the ae only traffic shape. Rate-limiting is done at the customer CPE.&lt;/p&gt;\n\n&lt;p&gt;We have a national MPLS network most links are 10G, but we have recently added a 20G core through parts of the network. The IP network is a &amp;#39;customer&amp;#39; of the MPLS network. We purchase bulk transit around the United States and only maintain IP routers that terminate customers at those locations.&lt;/p&gt;\n\n&lt;p&gt;A customer&amp;#39;s Internet is backhauled if you will with a l2circuit via the MPLS network to the nearest IP router. This is because its cheaper for us to have ~10 routers than ~200 (one for every POP).&lt;/p&gt;\n\n&lt;p&gt;The MPLS network is shared between all services. We carry VoIP, Video, 911 PSAPs, cell tower backhaul, and both commercial and residential internet. Residential users and schools are the usual targets for DDoS attacks. If we were to shape at the edge we run the risk of pushing a DDoS further into the network and saturating links. The problem becomes SLA violations then.&lt;/p&gt;\n\n&lt;p&gt;We have Arbor to auto mitigate DDoS events, but even a second of a 10G DDoS can violate some SLAs.&lt;/p&gt;\n\n&lt;p&gt;Edit: This probably raises the question of does CoS fix the issue. While I have deployed CoS through the MPLS core network and access network, with important/higher SLAs in a higher priority queue, I don&amp;#39;t think that is enough to sway the idea of not shaping at the IP termination vs the edge CPE.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgds3t0", "score_hidden": false, "stickied": false, "created": 1492478132.0, "created_utc": 1492449332.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgdpux6", "gilded": 0, "archived": false, "score": 3, "report_reasons": null, "author": "Torgen_Chickenvald", "parent_id": "t3_65vvew", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Can you help me understand why you guys are rate-limiting at the AE? I've always shaped / policed as close to the customer as possible, typically on a CPE (Juniper EX2200s and EX2300s for DIA customers). Are the AEs you're rate-limiting at inter-carrier NNIs or something? ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Can you help me understand why you guys are rate-limiting at the AE? I&amp;#39;ve always shaped / policed as close to the customer as possible, typically on a CPE (Juniper EX2200s and EX2300s for DIA customers). Are the AEs you&amp;#39;re rate-limiting at inter-carrier NNIs or something? &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgdpux6", "score_hidden": false, "stickied": false, "created": 1492475639.0, "created_utc": 1492446839.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 3}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": "", "user_reports": [], "id": "dgejl5k", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "pseudowire", "parent_id": "t1_dgej5p5", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I've actually been down this path with the burst-size-limit before. I know for shaping the best thing to do was set it to 1. Juniper automatically calculated the best burst-size to use. \n\nYou can actually dump down into the PFE and get all of that information. \n\nFor example 4Gbps customer with 1 burst size.\n\n    L3 node configuration   : 16402\n    state           : Configured\n    max_q_nodes     : 8\n    l2_index        : 4097\n    config_cache[0] : 0000101c\n    config_cache[1] : 07fc6000\n    rw_scale_id     : 0\n    max_rate        : 12500000\n    g_rate_enable   : TRUE\n    g_rate          : 12500000\n    cfg_burst_size  : 262144 bytes\n    burst_exp       : 14 (16384 bytes scaled by 16)\n    eh_weight       : 7\n    el_weight       : 7\n    byte_adjust     : 24\n    cell_mode       : off\n    gh_debit_to_g_rate : TRUE\n    gm_debit_to_g_rate : TRUE\n    eh_promo_to_g : TRUE\n    el_promo_to_g : TRUE \n\nI'm assuming however it is different since a policer wouldn't need to use the qx chip.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;ve actually been down this path with the burst-size-limit before. I know for shaping the best thing to do was set it to 1. Juniper automatically calculated the best burst-size to use. &lt;/p&gt;\n\n&lt;p&gt;You can actually dump down into the PFE and get all of that information. &lt;/p&gt;\n\n&lt;p&gt;For example 4Gbps customer with 1 burst size.&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;L3 node configuration   : 16402\nstate           : Configured\nmax_q_nodes     : 8\nl2_index        : 4097\nconfig_cache[0] : 0000101c\nconfig_cache[1] : 07fc6000\nrw_scale_id     : 0\nmax_rate        : 12500000\ng_rate_enable   : TRUE\ng_rate          : 12500000\ncfg_burst_size  : 262144 bytes\nburst_exp       : 14 (16384 bytes scaled by 16)\neh_weight       : 7\nel_weight       : 7\nbyte_adjust     : 24\ncell_mode       : off\ngh_debit_to_g_rate : TRUE\ngm_debit_to_g_rate : TRUE\neh_promo_to_g : TRUE\nel_promo_to_g : TRUE \n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;I&amp;#39;m assuming however it is different since a policer wouldn&amp;#39;t need to use the qx chip.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgejl5k", "score_hidden": false, "stickied": false, "created": 1492510907.0, "created_utc": 1492482107.0, "depth": 9, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgej5p5", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "error404", "parent_id": "t1_dgeheeg", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "You can (actually, must) set the maximum burst size when you configure the policer, so you might need to do some manual tuning on the values, but in general the documentation will set you on the right path: https://www.juniper.net/documentation/en_US/junos/topics/concept/policer-mx-m120-m320-burstsize-determining.html . This isn't queueing, since we expect the packets to be placed directly on the wire (no congestion), so doesn't introduce artificial delays as a shaper would, it simply discards (or marks) packets when the token bucket has been emptied (rate is exceeded and burst size is spent). For a simple example, you have a 100m circuit and you want a maximum of 1ms of congestion on your 10Gbps link caused by a massive burst, so you can set the burst-size to 1ms @ 10Gbps = 1.25MB. This represents an excess of 100ms of traffic into a 100mbps circuit, which should be more than sufficient.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;You can (actually, must) set the maximum burst size when you configure the policer, so you might need to do some manual tuning on the values, but in general the documentation will set you on the right path: &lt;a href=\"https://www.juniper.net/documentation/en_US/junos/topics/concept/policer-mx-m120-m320-burstsize-determining.html\"&gt;https://www.juniper.net/documentation/en_US/junos/topics/concept/policer-mx-m120-m320-burstsize-determining.html&lt;/a&gt; . This isn&amp;#39;t queueing, since we expect the packets to be placed directly on the wire (no congestion), so doesn&amp;#39;t introduce artificial delays as a shaper would, it simply discards (or marks) packets when the token bucket has been emptied (rate is exceeded and burst size is spent). For a simple example, you have a 100m circuit and you want a maximum of 1ms of congestion on your 10Gbps link caused by a massive burst, so you can set the burst-size to 1ms @ 10Gbps = 1.25MB. This represents an excess of 100ms of traffic into a 100mbps circuit, which should be more than sufficient.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgej5p5", "score_hidden": false, "stickied": false, "created": 1492510410.0, "created_utc": 1492481610.0, "depth": 8, "mod_reports": [], "subreddit_type": "public", "ups": 1}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": "", "user_reports": [], "id": "dgekwkh", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "Firebirdnz", "parent_id": "t1_dgeheeg", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Was basically going to say the same thing as /u/error404. Output Policers have their place sometimes they work other times they don't. Might not hurt to have a play.\n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Was basically going to say the same thing as &lt;a href=\"/u/error404\"&gt;/u/error404&lt;/a&gt;. Output Policers have their place sometimes they work other times they don&amp;#39;t. Might not hurt to have a play.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgekwkh", "score_hidden": false, "stickied": false, "created": 1492512509.0, "created_utc": 1492483709.0, "depth": 8, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgeheeg", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "pseudowire", "parent_id": "t1_dgegl31", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "We currently can't move the shaping closer to the customer due to potential that a DDoS could impact other internet customers over the LAG.\n\nI've actually never even considered an output policer. First thoughts is it would cause additional issues for internet customers. Say I have a 100Mbps customer and I police at 110Mbps. What happens when they burst? I'm going to drop all of that traffic. At least now the shaper attempts to queue it. Not saying thats a bad or good thing. TCP will adapt. UDP gets screwed. \n\nWe use input firewall filters to police a customer's upload traffic at the CPE. We tell them to shape their outbound traffic as well.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;We currently can&amp;#39;t move the shaping closer to the customer due to potential that a DDoS could impact other internet customers over the LAG.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;ve actually never even considered an output policer. First thoughts is it would cause additional issues for internet customers. Say I have a 100Mbps customer and I police at 110Mbps. What happens when they burst? I&amp;#39;m going to drop all of that traffic. At least now the shaper attempts to queue it. Not saying thats a bad or good thing. TCP will adapt. UDP gets screwed. &lt;/p&gt;\n\n&lt;p&gt;We use input firewall filters to police a customer&amp;#39;s upload traffic at the CPE. We tell them to shape their outbound traffic as well.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgeheeg", "score_hidden": false, "stickied": false, "created": 1492508334.0, "created_utc": 1492479534.0, "depth": 7, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgegl31", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "Firebirdnz", "parent_id": "t1_dgef6qy", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I just noticed the added diagram. Would it be possible to move the shaping closer to the customer? Or are you doing a psuedowire headend type setup and it is layer 2 from the current location right to the customer? What are you using to police in the other direction? Possible to do policing on output? ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I just noticed the added diagram. Would it be possible to move the shaping closer to the customer? Or are you doing a psuedowire headend type setup and it is layer 2 from the current location right to the customer? What are you using to police in the other direction? Possible to do policing on output? &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgegl31", "score_hidden": false, "stickied": false, "created": 1492507317.0, "created_utc": 1492478517.0, "depth": 6, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgef6qy", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "pseudowire", "parent_id": "t1_dgef234", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I appreciate you taking interest in the topic. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I appreciate you taking interest in the topic. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgef6qy", "score_hidden": false, "stickied": false, "created": 1492505575.0, "created_utc": 1492476775.0, "depth": 5, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgef234", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "Firebirdnz", "parent_id": "t1_dged8gy", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Okay. Odd. Sorry I don't have more insight.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Okay. Odd. Sorry I don&amp;#39;t have more insight.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgef234", "score_hidden": false, "stickied": false, "created": 1492505417.0, "created_utc": 1492476617.0, "depth": 4, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dged8gy", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "pseudowire", "parent_id": "t1_dgeb4um", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "For the most part MX240s and a few MX80s. You cannot do per-unit schedulers/shaping on the built in ports of the MX80. Meaning you have to add the 2x10G MICS for the trio/qx chips.\n\nI also tested with a LAG on the same card in the lab in the past with the same results.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;For the most part MX240s and a few MX80s. You cannot do per-unit schedulers/shaping on the built in ports of the MX80. Meaning you have to add the 2x10G MICS for the trio/qx chips.&lt;/p&gt;\n\n&lt;p&gt;I also tested with a LAG on the same card in the lab in the past with the same results.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dged8gy", "score_hidden": false, "stickied": false, "created": 1492503139.0, "created_utc": 1492474339.0, "depth": 3, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgeb4um", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "Firebirdnz", "parent_id": "t1_dge4yiz", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Ah right. I haven't utilised those on aggregates before. But generally speaking with Juniper you'll run into issues when you are shaping/policing across FPCs. When the ports are on the same shared controller (for example the built in ports on an MX80) you'll be okay because JunOS only programs the single FPC that controls those ports. When you do say a cross line card AE, say on an MX480, you'll run into issues because it programs each FPC for each line card with the same policer/shaper and you get double the allocated bandwidth (as you have already mentioned). From what I understand this is something that is in the design of the hardware and probably won't change anytime soon. You just have to work with the restrictions.\n\n\nWhat hardware are you running this on? Are you splitting the ports across line cards?", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Ah right. I haven&amp;#39;t utilised those on aggregates before. But generally speaking with Juniper you&amp;#39;ll run into issues when you are shaping/policing across FPCs. When the ports are on the same shared controller (for example the built in ports on an MX80) you&amp;#39;ll be okay because JunOS only programs the single FPC that controls those ports. When you do say a cross line card AE, say on an MX480, you&amp;#39;ll run into issues because it programs each FPC for each line card with the same policer/shaper and you get double the allocated bandwidth (as you have already mentioned). From what I understand this is something that is in the design of the hardware and probably won&amp;#39;t change anytime soon. You just have to work with the restrictions.&lt;/p&gt;\n\n&lt;p&gt;What hardware are you running this on? Are you splitting the ports across line cards?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgeb4um", "score_hidden": false, "stickied": false, "created": 1492500445.0, "created_utc": 1492471645.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dge4yiz", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "pseudowire", "parent_id": "t1_dge2vh2", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "This is an issue with a shaper not a policer.\n\nI'm on my mobile so I can't get the config.\n\nWe use traffic control profiles.\n\nYou can read more about it here.\n\nhttps://www.juniper.net/documentation/en_US/junos/topics/task/configuration/cos-shaping-rate-on-physical-interfaces-configuring.html", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;This is an issue with a shaper not a policer.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m on my mobile so I can&amp;#39;t get the config.&lt;/p&gt;\n\n&lt;p&gt;We use traffic control profiles.&lt;/p&gt;\n\n&lt;p&gt;You can read more about it here.&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://www.juniper.net/documentation/en_US/junos/topics/task/configuration/cos-shaping-rate-on-physical-interfaces-configuring.html\"&gt;https://www.juniper.net/documentation/en_US/junos/topics/task/configuration/cos-shaping-rate-on-physical-interfaces-configuring.html&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dge4yiz", "score_hidden": false, "stickied": false, "created": 1492492581.0, "created_utc": 1492463781.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dge2vh2", "gilded": 0, "archived": false, "score": 0, "report_reasons": null, "author": "Firebirdnz", "parent_id": "t3_65vvew", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Could you supply an example policer configuration?", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Could you supply an example policer configuration?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dge2vh2", "score_hidden": false, "stickied": false, "created": 1492490199.0, "created_utc": 1492461399.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 0}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65vvew", "likes": null, "replies": "", "user_reports": [], "id": "dgdyhwq", "gilded": 0, "archived": false, "score": 0, "report_reasons": null, "author": "kidcanada999", "parent_id": "t1_dgdsamx", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "You're looking at how to articulate this in layman's terms to a client/customer? ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;You&amp;#39;re looking at how to articulate this in layman&amp;#39;s terms to a client/customer? &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgdyhwq", "score_hidden": false, "stickied": false, "created": 1492485273.0, "created_utc": 1492456473.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 0}}], "after": null, "before": null}}, "user_reports": [], "id": "dgdsamx", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "pseudowire", "parent_id": "t1_dgdma6p", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I'm aware of overhead.\n\n2.5Mbps != 10Mbps.\n\nI think customers are OK with seeing something close to the speeds they purchase, but when its only 25% of the speed it generates a call/ticket.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m aware of overhead.&lt;/p&gt;\n\n&lt;p&gt;2.5Mbps != 10Mbps.&lt;/p&gt;\n\n&lt;p&gt;I think customers are OK with seeing something close to the speeds they purchase, but when its only 25% of the speed it generates a call/ticket.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgdsamx", "score_hidden": false, "stickied": false, "created": 1492478342.0, "created_utc": 1492449542.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgdma6p", "gilded": 0, "archived": false, "score": -5, "report_reasons": null, "author": "kidcanada999", "parent_id": "t3_65vvew", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Just so you're aware.  Even though a client is a 100Mbps client with a VPN, they won't get the 100Mbps speed through the VPN tunnel.  The data has to be encapsulated to enter the tunnel, thus causing a degradation in the speed.  Make sense?", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Just so you&amp;#39;re aware.  Even though a client is a 100Mbps client with a VPN, they won&amp;#39;t get the 100Mbps speed through the VPN tunnel.  The data has to be encapsulated to enter the tunnel, thus causing a degradation in the speed.  Make sense?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgdma6p", "score_hidden": false, "stickied": false, "created": 1492471564.0, "created_utc": 1492442764.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": -5}}], "after": null, "before": null}}]