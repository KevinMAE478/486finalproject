[{"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t3", "data": {"contest_mode": false, "banned_by": null, "media_embed": {}, "subreddit": "networking", "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;m working on a project and I&amp;#39;m fairly new with QOS so I&amp;#39;m not exactly sure with how to best/properly set it up.  &lt;/p&gt;\n\n&lt;p&gt;Here&amp;#39;s a basic and brief description of my topology. &lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;p&gt;I have an access layer switch &lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Above the access layer switch are two layer-3 switches &lt;/p&gt;&lt;/li&gt;\n&lt;li&gt;&lt;p&gt;Clients are connected to their respective vlans and I have a separate voice and data vlan. &lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Would configuring marking and having the packets &lt;em&gt;policed&lt;/em&gt; on both of my distribution layer switches work?&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "selftext": "I'm working on a project and I'm fairly new with QOS so I'm not exactly sure with how to best/properly set it up.  \n\nHere's a basic and brief description of my topology. \n\n- I have an access layer switch \n\n- Above the access layer switch are two layer-3 switches \n\n- Clients are connected to their respective vlans and I have a separate voice and data vlan. \n\nWould configuring marking and having the packets *policed* on both of my distribution layer switches work?\n\n", "likes": null, "suggested_sort": null, "user_reports": [], "secure_media": null, "link_flair_text": null, "id": "65ney6", "gilded": 0, "secure_media_embed": {}, "clicked": false, "score": 16, "report_reasons": null, "author": "1010101011111000111", "saved": false, "mod_reports": [], "name": "t3_65ney6", "subreddit_name_prefixed": "r/networking", "approved_by": null, "over_18": false, "domain": "self.networking", "hidden": false, "thumbnail": "", "subreddit_id": "t5_2qkaf", "edited": false, "link_flair_css_class": null, "author_flair_css_class": "", "downs": 0, "brand_safe": true, "archived": false, "removal_reason": null, "is_self": true, "hide_score": false, "spoiler": false, "permalink": "/r/networking/comments/65ney6/can_i_mark_and_police_qos_polices_on_two_layer3/", "num_reports": null, "locked": false, "stickied": false, "created": 1492345382.0, "url": "https://www.reddit.com/r/networking/comments/65ney6/can_i_mark_and_police_qos_polices_on_two_layer3/", "author_flair_text": "CCNA", "quarantine": false, "title": "Can I mark and police QOS polices on two layer-3 switches connected to a regular access layer switch? For example, mark coming ingress and police on the egress.", "created_utc": 1492316582.0, "distinguished": null, "media": null, "upvote_ratio": 0.84, "num_comments": 17, "visited": false, "subreddit_type": "public", "ups": 16}}], "after": null, "before": null}}, {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": "", "user_reports": [], "id": "dgcockk", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "VA_Network_Nerd", "parent_id": "t1_dgcoagr", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "The video recording of the training presentation is available here for free:  \n\nhttp://www.ciscolive.com/online  \n\nA free registration is required - this is an official Cisco site, so its pretty low-spam. There are thousands of quality presentations up there.  \n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;The video recording of the training presentation is available here for free:  &lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"http://www.ciscolive.com/online\"&gt;http://www.ciscolive.com/online&lt;/a&gt;  &lt;/p&gt;\n\n&lt;p&gt;A free registration is required - this is an official Cisco site, so its pretty low-spam. There are thousands of quality presentations up there.  &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgcockk", "score_hidden": false, "stickied": false, "created": 1492410325.0, "created_utc": 1492381525.0, "depth": 8, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgcoagr", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "1010101011111000111", "parent_id": "t1_dgcnzv1", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I absolutely will continue going through those slides. They're very informative. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I absolutely will continue going through those slides. They&amp;#39;re very informative. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgcoagr", "score_hidden": false, "stickied": false, "created": 1492410245.0, "created_utc": 1492381445.0, "depth": 7, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgcnzv1", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "VA_Network_Nerd", "parent_id": "t1_dgcnru6", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "No worries. This seems to be a complicated subject for a lot of people, so I'm pretty well rehearsed in explaining it.  \n\nBut I'm not nearly as well versed as Tim Szigeti is (he wrote the book I linked to on Cisco QoS) which is why I encourage you to consume some of those presentations for yourself.  \n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;No worries. This seems to be a complicated subject for a lot of people, so I&amp;#39;m pretty well rehearsed in explaining it.  &lt;/p&gt;\n\n&lt;p&gt;But I&amp;#39;m not nearly as well versed as Tim Szigeti is (he wrote the book I linked to on Cisco QoS) which is why I encourage you to consume some of those presentations for yourself.  &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgcnzv1", "score_hidden": false, "stickied": false, "created": 1492409849.0, "created_utc": 1492381049.0, "depth": 6, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgcnru6", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "1010101011111000111", "parent_id": "t1_dgcml1q", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Awesome.\n\nThanks for taking the time help me understand the process much clearer. Much appreciated. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Awesome.&lt;/p&gt;\n\n&lt;p&gt;Thanks for taking the time help me understand the process much clearer. Much appreciated. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgcnru6", "score_hidden": false, "stickied": false, "created": 1492409545.0, "created_utc": 1492380745.0, "depth": 5, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgcml1q", "gilded": 0, "archived": false, "score": 3, "report_reasons": null, "author": "VA_Network_Nerd", "parent_id": "t1_dgccaqf", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "&gt; There is just need for for policing? Or is queueing the same as policing?  \n\nI guess a better word for me to use is enqueue: to place something into a queue.  \n\nEvery switch has some quantity of traffic queues baked into the hardware. Well, some switches use virtual queues. But in either case, you configure each queue with some quantity of packet buffer resources.  \n\nPriority traffic that you REALLY don't want to drop gets deeper buffers, lower priority traffic or traffic that tends to be voluminous gets fewer buffer resources.  \n\nYou classify on ingress. Once traffic is assigned to the egress interface, the packets are assigned to the appropriate output queue. Sometimes you can influence the service time for each queue in terms of a percentage of bandwidth. This queue gets 30% of bandwidth, that queue gets 5% and so on.  \n\nThis is queuing. You aren't specifically forcing anything to go slow, you're just influencing things primarily through buffer allocations.  \n\nWhen you configure traffic shaping or policing you are writing specific policies about how fast you want specific traffic to flow. Packets matching this class may flow X Mbps. Packets matching that class may flow Y Mbps, and so on. Applying controls with this level of granularity causes more work and may not be necessary.  \n\nWithin a LAN, I would only consider shaping or policing if a wire-speed device were handing packets off to an oversubscribed device.  \n\nLet your LAN hand the packets to your WAN router at wire-speed, within the guidelines of your egress policy. Your WAN router has a great big fat processor array and piles of fast, deep memory to use to buffer packets while they are sorted by priority and forwarded along in compliance with your policy.  \n\n-----  \n\nA lot of this really is spelled out for you in the documents I linked to.  \n\n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;blockquote&gt;\n&lt;p&gt;There is just need for for policing? Or is queueing the same as policing?  &lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;I guess a better word for me to use is enqueue: to place something into a queue.  &lt;/p&gt;\n\n&lt;p&gt;Every switch has some quantity of traffic queues baked into the hardware. Well, some switches use virtual queues. But in either case, you configure each queue with some quantity of packet buffer resources.  &lt;/p&gt;\n\n&lt;p&gt;Priority traffic that you REALLY don&amp;#39;t want to drop gets deeper buffers, lower priority traffic or traffic that tends to be voluminous gets fewer buffer resources.  &lt;/p&gt;\n\n&lt;p&gt;You classify on ingress. Once traffic is assigned to the egress interface, the packets are assigned to the appropriate output queue. Sometimes you can influence the service time for each queue in terms of a percentage of bandwidth. This queue gets 30% of bandwidth, that queue gets 5% and so on.  &lt;/p&gt;\n\n&lt;p&gt;This is queuing. You aren&amp;#39;t specifically forcing anything to go slow, you&amp;#39;re just influencing things primarily through buffer allocations.  &lt;/p&gt;\n\n&lt;p&gt;When you configure traffic shaping or policing you are writing specific policies about how fast you want specific traffic to flow. Packets matching this class may flow X Mbps. Packets matching that class may flow Y Mbps, and so on. Applying controls with this level of granularity causes more work and may not be necessary.  &lt;/p&gt;\n\n&lt;p&gt;Within a LAN, I would only consider shaping or policing if a wire-speed device were handing packets off to an oversubscribed device.  &lt;/p&gt;\n\n&lt;p&gt;Let your LAN hand the packets to your WAN router at wire-speed, within the guidelines of your egress policy. Your WAN router has a great big fat processor array and piles of fast, deep memory to use to buffer packets while they are sorted by priority and forwarded along in compliance with your policy.  &lt;/p&gt;\n\n&lt;hr/&gt;\n\n&lt;p&gt;A lot of this really is spelled out for you in the documents I linked to.  &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgcml1q", "score_hidden": false, "stickied": false, "created": 1492407978.0, "created_utc": 1492379178.0, "depth": 4, "mod_reports": [], "subreddit_type": "public", "ups": 3}}], "after": null, "before": null}}, "user_reports": [], "id": "dgccaqf", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "1010101011111000111", "parent_id": "t1_dgbw5yo", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "So if I understand correctly, I mark incoming on the access/edge and queue on the outgoing interfaces of my distribution that connect my access switch/datacenter router? \n\nThere is just need for for policing? Or is queueing the same as policing? \n\nThanks for your help.\n\n(Edit: sorry forgot to mention that above my 2 distribution I have an edge router. The edge is where I will queue on the egress correct? Not my distribution switches?)", "edited": 1492366001.0, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;So if I understand correctly, I mark incoming on the access/edge and queue on the outgoing interfaces of my distribution that connect my access switch/datacenter router? &lt;/p&gt;\n\n&lt;p&gt;There is just need for for policing? Or is queueing the same as policing? &lt;/p&gt;\n\n&lt;p&gt;Thanks for your help.&lt;/p&gt;\n\n&lt;p&gt;(Edit: sorry forgot to mention that above my 2 distribution I have an edge router. The edge is where I will queue on the egress correct? Not my distribution switches?)&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgccaqf", "score_hidden": false, "stickied": false, "created": 1492394466.0, "created_utc": 1492365666.0, "depth": 3, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgbw5yo", "gilded": 0, "archived": false, "score": 3, "report_reasons": null, "author": "VA_Network_Nerd", "parent_id": "t1_dgbonml", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "[Cisco Medianet Quality of Service Design Guide for Enterprises](http://www.cisco.com/c/en/us/solutions/enterprise/design-zone-application-performance/landing_cVideo.html)  \n\n[End-to-End QoS Network Design: Quality of Service for Rich-Media &amp; Cloud Networks, 2nd Edition](http://www.ciscopress.com/store/end-to-end-qos-network-design-quality-of-service-for-9781587143694)  \n\n-----  \n\n&gt; I don't think I understand the process/reason behind QOS clearly.  \n\nThere are two basic phases of QoS:  \n\n1. Marking (almost always performed on ingress).  \n2. Queuing (almost always performed on egress).  \n\nAs packets enter the switch, the switch will pass them through an ingress policy-map to identify what application they are, and then apply a DSCP marking in accordance with your configuration. Additionally, the switch can be configured to see if packets are already marked, validate that marking somehow and then pass the packet onwards with the marking intact.  \n\nThe packets are forwarded from the ingress queue through the \"backplane\" to an egress queue.  \n\nThe egress queue has a look at the DSCP value (or CoS value if you're dealing with L2 frames or something) and places the packet into a specific egress queue for the appropriate interface. Your QoS policy will have assigned different quantities of packet buffers to each egress queue, depending on how critical the traffic is. The priority queue is slightly different in that it is assigned only a tiny quantity of buffer capacity, as its packets are never queued up for transmission - they always cut to the front of the line for immediate egress.  \n\nSo, think of all the things the edge / access-layer switch did for us:  \n\n1. Classified all the packets.  \n2. Applied markings to the packets.  \n3. Sent them towards the distribution layer in an orderly manner.  \n\nDistribution layer does not need to re-classify on ingress. Everything is already marked. So we can just trust the existing DSCP values for everything. Distribution does still need an egress QoS policy to assign appropriate levels of packet buffer memory to different priority levels.  \n\nIn a LAN, we can manage traffic prioritization with just buffer memory. We don't need to traffic-shape or police, unless there is a specific reason. Shaping &amp; policing are performance intensive and can significantly impact latency/jitter for non-priority queue traffic. So its best to not do it if we don't need to.  \n\n&gt; Would I not want to make sure that the voice traffic has higher priority to avoid latency and jitter?  \n\nYes, of course. But that has nothing to do with policing traffic.  \n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;&lt;a href=\"http://www.cisco.com/c/en/us/solutions/enterprise/design-zone-application-performance/landing_cVideo.html\"&gt;Cisco Medianet Quality of Service Design Guide for Enterprises&lt;/a&gt;  &lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"http://www.ciscopress.com/store/end-to-end-qos-network-design-quality-of-service-for-9781587143694\"&gt;End-to-End QoS Network Design: Quality of Service for Rich-Media &amp;amp; Cloud Networks, 2nd Edition&lt;/a&gt;  &lt;/p&gt;\n\n&lt;hr/&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;I don&amp;#39;t think I understand the process/reason behind QOS clearly.  &lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;There are two basic phases of QoS:  &lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Marking (almost always performed on ingress).&lt;br/&gt;&lt;/li&gt;\n&lt;li&gt;Queuing (almost always performed on egress).&lt;br/&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;As packets enter the switch, the switch will pass them through an ingress policy-map to identify what application they are, and then apply a DSCP marking in accordance with your configuration. Additionally, the switch can be configured to see if packets are already marked, validate that marking somehow and then pass the packet onwards with the marking intact.  &lt;/p&gt;\n\n&lt;p&gt;The packets are forwarded from the ingress queue through the &amp;quot;backplane&amp;quot; to an egress queue.  &lt;/p&gt;\n\n&lt;p&gt;The egress queue has a look at the DSCP value (or CoS value if you&amp;#39;re dealing with L2 frames or something) and places the packet into a specific egress queue for the appropriate interface. Your QoS policy will have assigned different quantities of packet buffers to each egress queue, depending on how critical the traffic is. The priority queue is slightly different in that it is assigned only a tiny quantity of buffer capacity, as its packets are never queued up for transmission - they always cut to the front of the line for immediate egress.  &lt;/p&gt;\n\n&lt;p&gt;So, think of all the things the edge / access-layer switch did for us:  &lt;/p&gt;\n\n&lt;ol&gt;\n&lt;li&gt;Classified all the packets.&lt;br/&gt;&lt;/li&gt;\n&lt;li&gt;Applied markings to the packets.&lt;br/&gt;&lt;/li&gt;\n&lt;li&gt;Sent them towards the distribution layer in an orderly manner.&lt;br/&gt;&lt;/li&gt;\n&lt;/ol&gt;\n\n&lt;p&gt;Distribution layer does not need to re-classify on ingress. Everything is already marked. So we can just trust the existing DSCP values for everything. Distribution does still need an egress QoS policy to assign appropriate levels of packet buffer memory to different priority levels.  &lt;/p&gt;\n\n&lt;p&gt;In a LAN, we can manage traffic prioritization with just buffer memory. We don&amp;#39;t need to traffic-shape or police, unless there is a specific reason. Shaping &amp;amp; policing are performance intensive and can significantly impact latency/jitter for non-priority queue traffic. So its best to not do it if we don&amp;#39;t need to.  &lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Would I not want to make sure that the voice traffic has higher priority to avoid latency and jitter?  &lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Yes, of course. But that has nothing to do with policing traffic.  &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgbw5yo", "score_hidden": false, "stickied": false, "created": 1492365235.0, "created_utc": 1492336435.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 3}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": "", "user_reports": [], "id": "dgbosxw", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "SherSlick", "parent_id": "t1_dgbonml", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Cisco has a validated design for if you are passing the local PC thru the phone. But honestly MOST users don't send enough traffic from their PC to effect the call quality. \n\nAgain most times its your WAN links that are constrained. If your terminating calls on a gateway inside your LAN (with some dedicated uplink to the PSTN) you likely won't have problems. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Cisco has a validated design for if you are passing the local PC thru the phone. But honestly MOST users don&amp;#39;t send enough traffic from their PC to effect the call quality. &lt;/p&gt;\n\n&lt;p&gt;Again most times its your WAN links that are constrained. If your terminating calls on a gateway inside your LAN (with some dedicated uplink to the PSTN) you likely won&amp;#39;t have problems. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgbosxw", "score_hidden": false, "stickied": false, "created": 1492346251.0, "created_utc": 1492317451.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgbonml", "gilded": 0, "archived": false, "score": 3, "report_reasons": null, "author": "1010101011111000111", "parent_id": "t1_dgbof5w", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Hmm. That's actually a good question.   \n\nI don't think I understand the process/reason behind QOS clearly. \n\nNow I'm thinking.\n\nWould I not want to have it set up internally to make sure that let's say I had a number of VoIP phones in the LAN and that those VoIP phones are used for communication between departments within the LAN?\n\nWould I not want to make sure that the voice traffic has higher priority to avoid latency and jitter? \n\n\nEdit: Those slides from the hyperlink are very informative. Thanks. ", "edited": 1492319997.0, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Hmm. That&amp;#39;s actually a good question.   &lt;/p&gt;\n\n&lt;p&gt;I don&amp;#39;t think I understand the process/reason behind QOS clearly. &lt;/p&gt;\n\n&lt;p&gt;Now I&amp;#39;m thinking.&lt;/p&gt;\n\n&lt;p&gt;Would I not want to have it set up internally to make sure that let&amp;#39;s say I had a number of VoIP phones in the LAN and that those VoIP phones are used for communication between departments within the LAN?&lt;/p&gt;\n\n&lt;p&gt;Would I not want to make sure that the voice traffic has higher priority to avoid latency and jitter? &lt;/p&gt;\n\n&lt;p&gt;Edit: Those slides from the hyperlink are very informative. Thanks. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgbonml", "score_hidden": false, "stickied": false, "created": 1492345997.0, "created_utc": 1492317197.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 3}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": "", "user_reports": [], "id": "dgc3oyh", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "VA_Network_Nerd", "parent_id": "t1_dgc2fmd", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "&gt; you can write a class-map that does \"match protocol http url &lt;url name&gt;\"  \n\nNews to me.  \nIf it works, I'd assume it will end up behaving the same as any other policy-map...  \n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;blockquote&gt;\n&lt;p&gt;you can write a class-map that does &amp;quot;match protocol http url &amp;lt;url name&amp;gt;&amp;quot;  &lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;News to me.&lt;br/&gt;\nIf it works, I&amp;#39;d assume it will end up behaving the same as any other policy-map...  &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgc3oyh", "score_hidden": false, "stickied": false, "created": 1492382835.0, "created_utc": 1492354035.0, "depth": 4, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgc2fmd", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "vlan-whisperer", "parent_id": "t1_dgc1ewb", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Ok very true about the ingress traffic from the ISP.\n\nBut that being said you can write a class-map that does \"match protocol http url &lt;url name&gt;\" I was just wondering how it works?  Apparently it does DPI and reads the http dialog to match the traffic?", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Ok very true about the ingress traffic from the ISP.&lt;/p&gt;\n\n&lt;p&gt;But that being said you can write a class-map that does &amp;quot;match protocol http url &amp;lt;url name&amp;gt;&amp;quot; I was just wondering how it works?  Apparently it does DPI and reads the http dialog to match the traffic?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgc2fmd", "score_hidden": false, "stickied": false, "created": 1492380877.0, "created_utc": 1492352077.0, "depth": 3, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgc1ewb", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "VA_Network_Nerd", "parent_id": "t1_dgc16tp", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "You can't put a DNS entry in a traditional QoS policy, just src/dst IP Address or port.  \n\nSo, if the site is fixed / not serviced by a CDN, it could be done - though I don't see any benefit of doing so.  \n\nNBAR or AVC or a similar Layer-7 recognition solution is the correct way to mark this traffic.  \n\nRemember: QoS is most effective on egress.  \nSo you could classify &amp; control traffic as it flows from your environment towards this website pretty easily.  \n\nBut classification &amp; control in ingress, especially ingress from your ISP is going to deliver mixed results and will not be a tremendous success. Remember where the congestion is really happening: at the ISP's egress from their network into your circuit. Packets are queuing there, in the ISP's router - causing jitter and delay. Your ingress QoS policy can influence that congestion by dropping some offending packets and causing TCP slow start. But the damage has already been done and will keep on happening because your router can't see the congestion occurring in the ISP's router.  \n\n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;You can&amp;#39;t put a DNS entry in a traditional QoS policy, just src/dst IP Address or port.  &lt;/p&gt;\n\n&lt;p&gt;So, if the site is fixed / not serviced by a CDN, it could be done - though I don&amp;#39;t see any benefit of doing so.  &lt;/p&gt;\n\n&lt;p&gt;NBAR or AVC or a similar Layer-7 recognition solution is the correct way to mark this traffic.  &lt;/p&gt;\n\n&lt;p&gt;Remember: QoS is most effective on egress.&lt;br/&gt;\nSo you could classify &amp;amp; control traffic as it flows from your environment towards this website pretty easily.  &lt;/p&gt;\n\n&lt;p&gt;But classification &amp;amp; control in ingress, especially ingress from your ISP is going to deliver mixed results and will not be a tremendous success. Remember where the congestion is really happening: at the ISP&amp;#39;s egress from their network into your circuit. Packets are queuing there, in the ISP&amp;#39;s router - causing jitter and delay. Your ingress QoS policy can influence that congestion by dropping some offending packets and causing TCP slow start. But the damage has already been done and will keep on happening because your router can&amp;#39;t see the congestion occurring in the ISP&amp;#39;s router.  &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgc1ewb", "score_hidden": false, "stickied": false, "created": 1492379118.0, "created_utc": 1492350318.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgc16tp", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "vlan-whisperer", "parent_id": "t1_dgbof5w", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Hey not trying to hijack, but I've heard you're the master.  Do you have any experience with marking specific sites based on URL as scavenger?  Using NBAR?  Does that work against https?", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Hey not trying to hijack, but I&amp;#39;ve heard you&amp;#39;re the master.  Do you have any experience with marking specific sites based on URL as scavenger?  Using NBAR?  Does that work against https?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgc16tp", "score_hidden": false, "stickied": false, "created": 1492378703.0, "created_utc": 1492349903.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 2}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65ney6", "likes": null, "replies": "", "user_reports": [], "id": "dgc8jo3", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "sixmill", "parent_id": "t1_dgc7liu", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Fair enough.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Fair enough.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgc8jo3", "score_hidden": false, "stickied": false, "created": 1492389565.0, "created_utc": 1492360765.0, "depth": 3, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgc7liu", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "VA_Network_Nerd", "parent_id": "t1_dgc4mq2", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "No. I meant what I said. Switches don't have the memory resources to do a great job of policing or shaping. So it's generally better to let the switch manage excessive traffic using buffer exhaustion. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;No. I meant what I said. Switches don&amp;#39;t have the memory resources to do a great job of policing or shaping. So it&amp;#39;s generally better to let the switch manage excessive traffic using buffer exhaustion. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgc7liu", "score_hidden": false, "stickied": false, "created": 1492388304.0, "created_utc": 1492359504.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dgc4mq2", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "sixmill", "parent_id": "t1_dgbof5w", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "&gt; Policing/Shaping is best performed on a WAN and not on a LAN\n\nAnd by WAN you mean 'any link that might be oversubscribed' or 'anywhere you might saturate your link bandwidth'.\nBasically, anywhere that you would reasonably have contention for bandwidth would benefit from properly configured QoS. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;blockquote&gt;\n&lt;p&gt;Policing/Shaping is best performed on a WAN and not on a LAN&lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;And by WAN you mean &amp;#39;any link that might be oversubscribed&amp;#39; or &amp;#39;anywhere you might saturate your link bandwidth&amp;#39;.\nBasically, anywhere that you would reasonably have contention for bandwidth would benefit from properly configured QoS. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgc4mq2", "score_hidden": false, "stickied": false, "created": 1492384238.0, "created_utc": 1492355438.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgbof5w", "gilded": 0, "archived": false, "score": 3, "report_reasons": null, "author": "VA_Network_Nerd", "parent_id": "t3_65ney6", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "&gt; I'm working on a project and I'm fairly new with QOS so I'm not exactly sure with how to best/properly set it up.  \n\nLike this:  \n\n[BRKCRS-2501 - Campus QoS Design-Simplified (2016)](http://d2zmdbbm9feqrf.cloudfront.net/2016/usa/pdf/BRKCRS-2501.pdf)  \n\n&gt; Would configuring marking and having the packets policed on both of my distribution layer switches work?  \n\nCan it be done? Yes.  \nBut why?  \n\nPolicing/Shaping is best performed on a WAN and not on a LAN.  \nIf you must do it on a LAN, best to do it at the edge if you can.  \n\nThink long and hard about the implications of policing at distribution. Are you sure you want to do this?  \nWhy do you think you want to do this?  \n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;blockquote&gt;\n&lt;p&gt;I&amp;#39;m working on a project and I&amp;#39;m fairly new with QOS so I&amp;#39;m not exactly sure with how to best/properly set it up.  &lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Like this:  &lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"http://d2zmdbbm9feqrf.cloudfront.net/2016/usa/pdf/BRKCRS-2501.pdf\"&gt;BRKCRS-2501 - Campus QoS Design-Simplified (2016)&lt;/a&gt;  &lt;/p&gt;\n\n&lt;blockquote&gt;\n&lt;p&gt;Would configuring marking and having the packets policed on both of my distribution layer switches work?  &lt;/p&gt;\n&lt;/blockquote&gt;\n\n&lt;p&gt;Can it be done? Yes.&lt;br/&gt;\nBut why?  &lt;/p&gt;\n\n&lt;p&gt;Policing/Shaping is best performed on a WAN and not on a LAN.&lt;br/&gt;\nIf you must do it on a LAN, best to do it at the edge if you can.  &lt;/p&gt;\n\n&lt;p&gt;Think long and hard about the implications of policing at distribution. Are you sure you want to do this?&lt;br/&gt;\nWhy do you think you want to do this?  &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgbof5w", "score_hidden": false, "stickied": false, "created": 1492345594.0, "created_utc": 1492316794.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 3}}], "after": null, "before": null}}]