[{"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t3", "data": {"contest_mode": false, "banned_by": null, "media_embed": {}, "subreddit": "networking", "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;Hey all, hope you&amp;#39;re getting a bit of a break from work this weekend for the Easter holiday.  I&amp;#39;m doing a bit of work to prepare for a router replacement this coming Tuesday. I&amp;#39;m fairly new to JunOS so I might be missing something simple, but I&amp;#39;m hoping someone can send me in the right direction.&lt;/p&gt;\n\n&lt;p&gt;I&amp;#39;m trying to configure a Juniper SRX to replace a Cisco 2911 at one of our remote sites.  Below is the configuration on the HQ router that I&amp;#39;m trying to build the tunnel back to.  I&amp;#39;m referencing some online notes at overlaid.net (link below) to try and build my JunOS config, but unfortunately the HQ config doesn&amp;#39;t use a loopback interface as it&amp;#39;s source...  (yeah, I know it&amp;#39;s ugly.. I inherited this.)&lt;/p&gt;\n\n&lt;p&gt;TL;DR.  What does the JunOS configuration that would build an encrypted IPSec/GRE tunnel to HQ look like assuming HQs config is as follows:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;access-list 100 permit ip any any\naccess-list 120 permit gre host A.A.A.A host B.B.B.B\n\ncrypto isakmp policy 1\n encr aes 256\n authentication pre-share\n group 2\ncrypto isakmp key 123abcSecret address B.B.B.B\ncrypto isakmp aggressive-mode disable\n!\ncrypto ipsec security-association lifetime seconds 28800\n!\ncrypto ipsec transform-set vpn esp-aes 256 esp-md5-hmac\n mode tunnel\n!\n!\n!\ncrypto map vpn 10 ipsec-isakmp\n set peer B.B.B.B\n set transform-set vpn\n match address 120\n!\n\nroute-map VPN-TUNNEL-ROUTING permit 10\n match ip address 100\n set ip next-hop C.C.C.C\n!\n\ninterface FastEthernet0/0\n ip address A.A.A.A 255.255.255.224\n duplex auto\n speed auto\n crypto map vpn\n!\n\ninterface Tunnel1\n description WAN tunnel 1\n ip address D.D.D.D 255.255.255.252\n ip mtu 1400\n ip tcp adjust-mss 1350\n ip policy route-map VPN-TUNNEL-ROUTING\n delay 1000\n tunnel source FastEthernet0/0\n tunnel destination B.B.B.B\n!\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Links:&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"https://overlaid.net/2014/02/01/juniper-cisco-gre-ipsec-with-ospf/\"&gt;https://overlaid.net/2014/02/01/juniper-cisco-gre-ipsec-with-ospf/&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"http://myitnotes.info/doku.php?id=en:jobs:vpn_gre_over_ipsec_1\"&gt;http://myitnotes.info/doku.php?id=en:jobs:vpn_gre_over_ipsec_1&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;Thanks for reading, your thoughts are greatly appreciated! &lt;/p&gt;\n\n&lt;p&gt;EDITS: Formatting.&lt;/p&gt;\n\n&lt;p&gt;EDIT: JunOS (What I have so far as requested by &lt;a href=\"/u/dark_15\"&gt;/u/dark_15&lt;/a&gt;) Drunk dual JNCIE.&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;set security ike proposal HQ-WAN1-IKE-PROPOSAL authentication-method pre-shared-keys\nset security ike proposal HQ-WAN1-IKE-PROPOSAL dh-group group2\nset security ike proposal HQ-WAN1-IKE-PROPOSAL authentication-algorithm sha1\nset security ike proposal HQ-WAN1-IKE-PROPOSAL encryption-algorithm aes-256-cbc\nset security ike proposal HQ-WAN1-IKE-PROPOSAL lifetime-seconds 28800\n\nset security ike policy HQ-WAN1-IKE-POLICY mode main\nset security ike policy HQ-WAN1-IKE-POLICY proposals HQ-WAN1-IKE-PROPOSAL\nset security ike policy HQ-WAN1-IKE-POLICY pre-shared-key ascii-text 123abcSecret\n\nset security ike gateway HQ-WAN1 ike-policy HQ-WAN1-IKE-POLICY\nset security ike gateway HQ-WAN1 address A.A.A.A\nset security ike gateway HQ-WAN1 local-identity inet B.B.B.B\nset security ike gateway HQ-WAN1 external-interface ge-0/0/0\n\nset security ipsec proposal HQ-WAN1-IPSEC-PROPOSAL protocol esp\nset security ipsec proposal HQ-WAN1-IPSEC-PROPOSAL authentication-algorithm hmac-md5-96\nset security ipsec proposal HQ-WAN1-IPSEC-PROPOSAL encryption-algorithm aes-256-cbc\nset security ipsec proposal HQ-WAN1-IPSEC-PROPOSAL lifetime-seconds 3600\nset security ipsec policy HQ-WAN1-IPSEC-POLICY perfect-forward-secrecy keys group2\nset security ipsec policy HQ-WAN1-IPSEC-POLICY proposals HQ-WAN1-IPSEC-PROPOSAL\n\nset security ipsec vpn HQ-WAN1 bind-interface st0.0\nset security ipsec vpn HQ-WAN1 ike gateway HQ-WAN1\nset security ipsec vpn HQ-WAN1 ike proxy-identity local B.B.B.B/32\nset security ipsec vpn HQ-WAN1 ike proxy-identity remote A.A.A.A/32\nset security ipsec vpn HQ-WAN1 ike proxy-identity service junos-gre\nset security ipsec vpn HQ-WAN1 ike ipsec-policy HQ-WAN1-IPSEC-POLICY\nset security ipsec vpn HQ-WAN1 establish-tunnels immediately\nset security flow tcp-mss ipsec-vpn mss 1350\n\nset interfaces st0 unit 0 family inet\nset interfaces gr-0/0/0 unit 0 clear-dont-fragment-bit\nset interfaces gr-0/0/0 unit 0 tunnel source B.B.B.B\nset interfaces gr-0/0/0 unit 0 tunnel destination A.A.A.A\nset interfaces gr-0/0/0 unit 0 tunnel allow-fragmentation\nset interfaces gr-0/0/0 unit 0 family inet mtu 1400\nset interfaces gr-0/0/0 unit 0 family inet address E.E.E.E/30\n\nset security policies default-policy permit-all\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "selftext": "Hey all, hope you're getting a bit of a break from work this weekend for the Easter holiday.  I'm doing a bit of work to prepare for a router replacement this coming Tuesday. I'm fairly new to JunOS so I might be missing something simple, but I'm hoping someone can send me in the right direction.\n\n\nI'm trying to configure a Juniper SRX to replace a Cisco 2911 at one of our remote sites.  Below is the configuration on the HQ router that I'm trying to build the tunnel back to.  I'm referencing some online notes at overlaid.net (link below) to try and build my JunOS config, but unfortunately the HQ config doesn't use a loopback interface as it's source...  (yeah, I know it's ugly.. I inherited this.)\n\n\n\nTL;DR.  What does the JunOS configuration that would build an encrypted IPSec/GRE tunnel to HQ look like assuming HQs config is as follows:\n\n    access-list 100 permit ip any any\n    access-list 120 permit gre host A.A.A.A host B.B.B.B\n  \n    crypto isakmp policy 1\n     encr aes 256\n     authentication pre-share\n     group 2\n    crypto isakmp key 123abcSecret address B.B.B.B\n    crypto isakmp aggressive-mode disable\n    !\n    crypto ipsec security-association lifetime seconds 28800\n    !\n    crypto ipsec transform-set vpn esp-aes 256 esp-md5-hmac\n     mode tunnel\n    !\n    !\n    !\n    crypto map vpn 10 ipsec-isakmp\n     set peer B.B.B.B\n     set transform-set vpn\n     match address 120\n    !\n  \n    route-map VPN-TUNNEL-ROUTING permit 10\n     match ip address 100\n     set ip next-hop C.C.C.C\n    !\n    \n    interface FastEthernet0/0\n     ip address A.A.A.A 255.255.255.224\n     duplex auto\n     speed auto\n     crypto map vpn\n    !\n    \n    interface Tunnel1\n     description WAN tunnel 1\n     ip address D.D.D.D 255.255.255.252\n     ip mtu 1400\n     ip tcp adjust-mss 1350\n     ip policy route-map VPN-TUNNEL-ROUTING\n     delay 1000\n     tunnel source FastEthernet0/0\n     tunnel destination B.B.B.B\n    !\n\n\n\nLinks:\n\n[https://overlaid.net/2014/02/01/juniper-cisco-gre-ipsec-with-ospf/](https://overlaid.net/2014/02/01/juniper-cisco-gre-ipsec-with-ospf/)\n\n[http://myitnotes.info/doku.php?id=en:jobs:vpn_gre_over_ipsec_1](http://myitnotes.info/doku.php?id=en:jobs:vpn_gre_over_ipsec_1)\n\n\nThanks for reading, your thoughts are greatly appreciated! \n\n\nEDITS: Formatting.\n\nEDIT: JunOS (What I have so far as requested by /u/dark_15) Drunk dual JNCIE.\n\n    set security ike proposal HQ-WAN1-IKE-PROPOSAL authentication-method pre-shared-keys\n    set security ike proposal HQ-WAN1-IKE-PROPOSAL dh-group group2\n    set security ike proposal HQ-WAN1-IKE-PROPOSAL authentication-algorithm sha1\n    set security ike proposal HQ-WAN1-IKE-PROPOSAL encryption-algorithm aes-256-cbc\n    set security ike proposal HQ-WAN1-IKE-PROPOSAL lifetime-seconds 28800\n\n    set security ike policy HQ-WAN1-IKE-POLICY mode main\n    set security ike policy HQ-WAN1-IKE-POLICY proposals HQ-WAN1-IKE-PROPOSAL\n    set security ike policy HQ-WAN1-IKE-POLICY pre-shared-key ascii-text 123abcSecret\n\n    set security ike gateway HQ-WAN1 ike-policy HQ-WAN1-IKE-POLICY\n    set security ike gateway HQ-WAN1 address A.A.A.A\n    set security ike gateway HQ-WAN1 local-identity inet B.B.B.B\n    set security ike gateway HQ-WAN1 external-interface ge-0/0/0\n\n    set security ipsec proposal HQ-WAN1-IPSEC-PROPOSAL protocol esp\n    set security ipsec proposal HQ-WAN1-IPSEC-PROPOSAL authentication-algorithm hmac-md5-96\n    set security ipsec proposal HQ-WAN1-IPSEC-PROPOSAL encryption-algorithm aes-256-cbc\n    set security ipsec proposal HQ-WAN1-IPSEC-PROPOSAL lifetime-seconds 3600\n    set security ipsec policy HQ-WAN1-IPSEC-POLICY perfect-forward-secrecy keys group2\n    set security ipsec policy HQ-WAN1-IPSEC-POLICY proposals HQ-WAN1-IPSEC-PROPOSAL\n\n    set security ipsec vpn HQ-WAN1 bind-interface st0.0\n    set security ipsec vpn HQ-WAN1 ike gateway HQ-WAN1\n    set security ipsec vpn HQ-WAN1 ike proxy-identity local B.B.B.B/32\n    set security ipsec vpn HQ-WAN1 ike proxy-identity remote A.A.A.A/32\n    set security ipsec vpn HQ-WAN1 ike proxy-identity service junos-gre\n    set security ipsec vpn HQ-WAN1 ike ipsec-policy HQ-WAN1-IPSEC-POLICY\n    set security ipsec vpn HQ-WAN1 establish-tunnels immediately\n    set security flow tcp-mss ipsec-vpn mss 1350\n    \n    set interfaces st0 unit 0 family inet\n    set interfaces gr-0/0/0 unit 0 clear-dont-fragment-bit\n    set interfaces gr-0/0/0 unit 0 tunnel source B.B.B.B\n    set interfaces gr-0/0/0 unit 0 tunnel destination A.A.A.A\n    set interfaces gr-0/0/0 unit 0 tunnel allow-fragmentation\n    set interfaces gr-0/0/0 unit 0 family inet mtu 1400\n    set interfaces gr-0/0/0 unit 0 family inet address E.E.E.E/30\n\n    set security policies default-policy permit-all", "likes": null, "suggested_sort": null, "user_reports": [], "secure_media": null, "link_flair_text": null, "id": "65kp2c", "gilded": 0, "secure_media_embed": {}, "clicked": false, "score": 33, "report_reasons": null, "author": "routemonkey", "saved": false, "mod_reports": [], "name": "t3_65kp2c", "subreddit_name_prefixed": "r/networking", "approved_by": null, "over_18": false, "domain": "self.networking", "hidden": false, "thumbnail": "", "subreddit_id": "t5_2qkaf", "edited": 1492283615.0, "link_flair_css_class": null, "author_flair_css_class": "", "downs": 0, "brand_safe": true, "archived": false, "removal_reason": null, "is_self": true, "hide_score": false, "spoiler": false, "permalink": "/r/networking/comments/65kp2c/replacing_remote_site_router_cisco_2911_with/", "num_reports": null, "locked": false, "stickied": false, "created": 1492310706.0, "url": "https://www.reddit.com/r/networking/comments/65kp2c/replacing_remote_site_router_cisco_2911_with/", "author_flair_text": "Make your own flair", "quarantine": false, "title": "Replacing remote site router Cisco 2911, with Juniper SRX. Struggling with JunOS IPSec/GRE configuration.", "created_utc": 1492281906.0, "distinguished": null, "media": null, "upvote_ratio": 0.91, "num_comments": 9, "visited": false, "subreddit_type": "public", "ups": 33}}], "after": null, "before": null}}, {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65kp2c", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65kp2c", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65kp2c", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65kp2c", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65kp2c", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65kp2c", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65kp2c", "likes": null, "replies": "", "user_reports": [], "id": "dgbs6hd", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "dark_15", "parent_id": "t1_dgbmy2r", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "This is a route-based VPN, not a policy-based VPN.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;This is a route-based VPN, not a policy-based VPN.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgbs6hd", "score_hidden": false, "stickied": false, "created": 1492353156.0, "created_utc": 1492324356.0, "depth": 6, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgbmy2r", "gilded": 0, "archived": false, "score": 0, "report_reasons": null, "author": "[deleted]", "parent_id": "t1_dgb3szn", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "[deleted]", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;[deleted]&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgbmy2r", "score_hidden": false, "stickied": false, "created": 1492343129.0, "created_utc": 1492314329.0, "depth": 5, "mod_reports": [], "subreddit_type": "public", "ups": 0}}], "after": null, "before": null}}, "user_reports": [], "id": "dgb3szn", "gilded": 0, "archived": false, "score": 8, "report_reasons": null, "author": "dark_15", "parent_id": "t1_dgb2amk", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Policy-wise: Yes the default permit-all will work, but the interfaces need to be bound to a security zone regardless.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Policy-wise: Yes the default permit-all will work, but the interfaces need to be bound to a security zone regardless.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgb3szn", "score_hidden": false, "stickied": false, "created": 1492315715.0, "created_utc": 1492286915.0, "depth": 4, "mod_reports": [], "subreddit_type": "public", "ups": 8}}], "after": null, "before": null}}, "user_reports": [], "id": "dgb2amk", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "routemonkey", "parent_id": "t1_dgb19n6", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Ah crap, I missed a line above. (now added)   The notes I'm using online said for troubleshooting you can use a permit-all.  That should rule out any security problems, no?  Maybe not your 3rd point?\n\n    set security policies default-policy permit-all\n\nHmm, you're right about the IKEv2, that might have something to do with it!\n\nNothing on the output of the ike sa and ipsec sa commands yet.\n\n    admin@Remote-1&gt; show security ike security-associations \n    \n    admin@Remote-1&gt; show security ipsec security-associations \n      Total active tunnels: 0\n\n\n\n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Ah crap, I missed a line above. (now added)   The notes I&amp;#39;m using online said for troubleshooting you can use a permit-all.  That should rule out any security problems, no?  Maybe not your 3rd point?&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;set security policies default-policy permit-all\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;p&gt;Hmm, you&amp;#39;re right about the IKEv2, that might have something to do with it!&lt;/p&gt;\n\n&lt;p&gt;Nothing on the output of the ike sa and ipsec sa commands yet.&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;admin@Remote-1&amp;gt; show security ike security-associations \n\nadmin@Remote-1&amp;gt; show security ipsec security-associations \n  Total active tunnels: 0\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgb2amk", "score_hidden": false, "stickied": false, "created": 1492313653.0, "created_utc": 1492284853.0, "depth": 3, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgb19n6", "gilded": 0, "archived": false, "score": 6, "report_reasons": null, "author": "dark_15", "parent_id": "t1_dgb0zcv", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "OK Cool. So a few things I noticed:\n\n* The st0 and gr interfaces don't appear to be in a security zone. They will need to be bound a security zone (it doesn't have to be the default trust/untrust zones either) before traffic will pass\n* What do you your security policies look like?\n* Is ge-0/0/0 in a security zone? Does it allow IPSEC traffic in from the host-inbound-traffic system-services stanza?\n* Your IKE policy forces the use of IKEv2 on the SRX, but I don't see a similar config on the Cisco side. Is this intentional?\n\nAlso can you post the output of the following commands?\n\n    show security ike security-associations\n    show security ipsec security-associations\n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;OK Cool. So a few things I noticed:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;The st0 and gr interfaces don&amp;#39;t appear to be in a security zone. They will need to be bound a security zone (it doesn&amp;#39;t have to be the default trust/untrust zones either) before traffic will pass&lt;/li&gt;\n&lt;li&gt;What do you your security policies look like?&lt;/li&gt;\n&lt;li&gt;Is ge-0/0/0 in a security zone? Does it allow IPSEC traffic in from the host-inbound-traffic system-services stanza?&lt;/li&gt;\n&lt;li&gt;Your IKE policy forces the use of IKEv2 on the SRX, but I don&amp;#39;t see a similar config on the Cisco side. Is this intentional?&lt;/li&gt;\n&lt;/ul&gt;\n\n&lt;p&gt;Also can you post the output of the following commands?&lt;/p&gt;\n\n&lt;pre&gt;&lt;code&gt;show security ike security-associations\nshow security ipsec security-associations\n&lt;/code&gt;&lt;/pre&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgb19n6", "score_hidden": false, "stickied": false, "created": 1492312288.0, "created_utc": 1492283488.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 6}}], "after": null, "before": null}}, "user_reports": [], "id": "dgb0zcv", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "routemonkey", "parent_id": "t1_dgb08eu", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "You bet, I've added the JunOS as requested.  We're currently doing dynamic routing to this site (EIGRP).  I have the go-ahead to move all of the sites to OSPF... but during the transition (Until I have OSPF running on the HQ routers)... I'm going to use a static route for this site since it only has one subnet.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;You bet, I&amp;#39;ve added the JunOS as requested.  We&amp;#39;re currently doing dynamic routing to this site (EIGRP).  I have the go-ahead to move all of the sites to OSPF... but during the transition (Until I have OSPF running on the HQ routers)... I&amp;#39;m going to use a static route for this site since it only has one subnet.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgb0zcv", "score_hidden": false, "stickied": false, "created": 1492311917.0, "created_utc": 1492283117.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dgb08eu", "gilded": 0, "archived": false, "score": 4, "report_reasons": null, "author": "dark_15", "parent_id": "t3_65kp2c", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "We're going to need your configuration first (whatever you have) before we can tell you much of anything. It's easier to point out and help explain the \"why's\" of a configuration this way.\n\nAlso why GRE over IPSEC? Are you doing any sort of dynamic routing or something?", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;We&amp;#39;re going to need your configuration first (whatever you have) before we can tell you much of anything. It&amp;#39;s easier to point out and help explain the &amp;quot;why&amp;#39;s&amp;quot; of a configuration this way.&lt;/p&gt;\n\n&lt;p&gt;Also why GRE over IPSEC? Are you doing any sort of dynamic routing or something?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgb08eu", "score_hidden": false, "stickied": false, "created": 1492310920.0, "created_utc": 1492282120.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 4}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65kp2c", "likes": null, "replies": "", "user_reports": [], "id": "dgbx62o", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "Nerd_runner", "parent_id": "t3_65kp2c", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Do you use routing instances?", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Do you use routing instances?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgbx62o", "score_hidden": false, "stickied": false, "created": 1492368677.0, "created_utc": 1492339877.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 1}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65kp2c", "likes": null, "replies": "", "user_reports": [], "id": "dgcdqo4", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "spann0r", "parent_id": "t3_65kp2c", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "If you have VTI available on your head-end Cisco, you can probably do away with GRE altogether.\n\nYou're also going to want to rethink that D-H Group 2 if the security of this tunnel is important (which your choice of 256-bit AES would imply)", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;If you have VTI available on your head-end Cisco, you can probably do away with GRE altogether.&lt;/p&gt;\n\n&lt;p&gt;You&amp;#39;re also going to want to rethink that D-H Group 2 if the security of this tunnel is important (which your choice of 256-bit AES would imply)&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgcdqo4", "score_hidden": false, "stickied": false, "created": 1492396399.0, "created_utc": 1492367599.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 1}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_65kp2c", "likes": null, "replies": "", "user_reports": [], "id": "dgd4u4l", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "oldcreek12", "parent_id": "t3_65kp2c", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Your SRX configuration won't work, keep in mind that Junos IPsec implementation does not do transport mode at all, which means you will need to have a different IKE gateway IP addresses from your GRE source and destination addresses, once you have your IPsec VPN bound to a tunnel interface you then route GRE destination out of the tunnel interface to achieve GRE/IPsec, not IPsec/GRE (since you will be running routing protocols, it can not be IPsec/GRE). Looking at your Junos snippet, you need some real help to get this work.\n\nEasier way is configure VTI on Cisco side to eliminate extra GRE header over head, which I understand, might not be an easy change on Cisco side.", "edited": 1492405244.0, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Your SRX configuration won&amp;#39;t work, keep in mind that Junos IPsec implementation does not do transport mode at all, which means you will need to have a different IKE gateway IP addresses from your GRE source and destination addresses, once you have your IPsec VPN bound to a tunnel interface you then route GRE destination out of the tunnel interface to achieve GRE/IPsec, not IPsec/GRE (since you will be running routing protocols, it can not be IPsec/GRE). Looking at your Junos snippet, you need some real help to get this work.&lt;/p&gt;\n\n&lt;p&gt;Easier way is configure VTI on Cisco side to eliminate extra GRE header over head, which I understand, might not be an easy change on Cisco side.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgd4u4l", "score_hidden": false, "stickied": false, "created": 1492433803.0, "created_utc": 1492405003.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}]