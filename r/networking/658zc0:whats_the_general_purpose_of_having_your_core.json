[{"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t3", "data": {"contest_mode": false, "banned_by": null, "media_embed": {}, "subreddit": "networking", "selftext_html": "&lt;!-- SC_OFF --&gt;&lt;div class=\"md\"&gt;&lt;p&gt;As the title states, I&amp;#39;m wondering what the benefit is of this based on your experiences.  I&amp;#39;ve been in the field for a reasonable amount of time and I can safely say I have not seen this setup before now.&lt;/p&gt;\n\n&lt;p&gt;The setup is a user having a core switch (any switch really) with one interface pointed to the firewall inside and another interface for the carrier&amp;#39;s circuit to connect to.  Fiber or what not.  I would think you want all untrusted traffic to come into and leave out of the firewall?  The only reason I can think of for having both ports on a switch connect to a firewall and the actual ethernet pipe is for management reasons or maybe because the ethernet handoff is in a vlan separated from the internal network anyways.  Likely to be considered a dumb comment by many, but I don&amp;#39;t care I&amp;#39;d like to know.  Love to hear your thoughts on this setup.&lt;/p&gt;\n&lt;/div&gt;&lt;!-- SC_ON --&gt;", "selftext": "As the title states, I'm wondering what the benefit is of this based on your experiences.  I've been in the field for a reasonable amount of time and I can safely say I have not seen this setup before now.\n\nThe setup is a user having a core switch (any switch really) with one interface pointed to the firewall inside and another interface for the carrier's circuit to connect to.  Fiber or what not.  I would think you want all untrusted traffic to come into and leave out of the firewall?  The only reason I can think of for having both ports on a switch connect to a firewall and the actual ethernet pipe is for management reasons or maybe because the ethernet handoff is in a vlan separated from the internal network anyways.  Likely to be considered a dumb comment by many, but I don't care I'd like to know.  Love to hear your thoughts on this setup.", "likes": null, "suggested_sort": null, "user_reports": [], "secure_media": null, "link_flair_text": null, "id": "658zc0", "gilded": 0, "secure_media_embed": {}, "clicked": false, "score": 65, "report_reasons": null, "author": "s1nsp4wn", "saved": false, "mod_reports": [], "name": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "approved_by": null, "over_18": false, "domain": "self.networking", "hidden": false, "thumbnail": "", "subreddit_id": "t5_2qkaf", "edited": false, "link_flair_css_class": null, "author_flair_css_class": null, "downs": 0, "brand_safe": true, "archived": false, "removal_reason": null, "is_self": true, "hide_score": false, "spoiler": false, "permalink": "/r/networking/comments/658zc0/whats_the_general_purpose_of_having_your_core/", "num_reports": null, "locked": false, "stickied": false, "created": 1492153423.0, "url": "https://www.reddit.com/r/networking/comments/658zc0/whats_the_general_purpose_of_having_your_core/", "author_flair_text": null, "quarantine": false, "title": "What's the general purpose of having your core switch connect to a firewall for internet AND directly to the internet on a different port on the same switch?", "created_utc": 1492124623.0, "distinguished": null, "media": null, "upvote_ratio": 0.93, "num_comments": 38, "visited": false, "subreddit_type": "public", "ups": 65}}], "after": null, "before": null}}, {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg94ugu", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "WeaverofClouds", "parent_id": "t1_dg8tio0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Also have to worry about interface types.  If your carrier hands you fiber, but your firewall only has copper ports then you are plugging the carrier hand-off into a device that handles fiber.  I think the main reason people do it is for flexibility in design like HA or future HA, Internet DMZ, etc.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Also have to worry about interface types.  If your carrier hands you fiber, but your firewall only has copper ports then you are plugging the carrier hand-off into a device that handles fiber.  I think the main reason people do it is for flexibility in design like HA or future HA, Internet DMZ, etc.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg94ugu", "score_hidden": false, "stickied": false, "created": 1492205864.0, "created_utc": 1492177064.0, "depth": 3, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8tio0", "gilded": 0, "archived": false, "score": 11, "report_reasons": null, "author": "ProjectSnowman", "parent_id": "t1_dg8iiel", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Useful for DMZ stuff too. Most firewalls don't have tons of ports for hooking stuff up to. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Useful for DMZ stuff too. Most firewalls don&amp;#39;t have tons of ports for hooking stuff up to. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8tio0", "score_hidden": false, "stickied": false, "created": 1492177100.0, "created_utc": 1492148300.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 11}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8iiel", "gilded": 0, "archived": false, "score": 19, "report_reasons": null, "author": "brutalhonesty45", "parent_id": "t1_dg8fuvv", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "It also leaves maximum flexibility to have all your networks in a vlan inside your fabric.  I thought this was the standard way of doing things.  ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;It also leaves maximum flexibility to have all your networks in a vlan inside your fabric.  I thought this was the standard way of doing things.  &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8iiel", "score_hidden": false, "stickied": false, "created": 1492159942.0, "created_utc": 1492131142.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 19}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg94pua", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "thedude42", "parent_id": "t1_dg8fuvv", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Is the rationale that you have fate sharing of the Internet circuit and the core network? I'm assuming there is redundancy in the core switching.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Is the rationale that you have fate sharing of the Internet circuit and the core network? I&amp;#39;m assuming there is redundancy in the core switching.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg94pua", "score_hidden": false, "stickied": false, "created": 1492205672.0, "created_utc": 1492176872.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8fuvv", "gilded": 0, "archived": false, "score": 37, "report_reasons": null, "author": "wavvo", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "We do this because we have our firewalls in a HA pair. Single connection from the ISP and have the internet in a seperate vlan. All traffic is still routed via the firewalls. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;We do this because we have our firewalls in a HA pair. Single connection from the ISP and have the internet in a seperate vlan. All traffic is still routed via the firewalls. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8fuvv", "score_hidden": false, "stickied": false, "created": 1492156298.0, "created_utc": 1492127498.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 37}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg970gg", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "dasunsrule32", "parent_id": "t1_dg8neok", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Meraki switches are actually pretty nice, however, their appliances make me want to throw them through the wall.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Meraki switches are actually pretty nice, however, their appliances make me want to throw them through the wall.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg970gg", "score_hidden": false, "stickied": false, "created": 1492208916.0, "created_utc": 1492180116.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8neok", "gilded": 0, "archived": false, "score": 3, "report_reasons": null, "author": "s1nsp4wn", "parent_id": "t1_dg8g5g6", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Yep, that's exactly what I ran into today.  Customer had an HA pair of firewalls connecting this way to, gasp, Meraki stack switches.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Yep, that&amp;#39;s exactly what I ran into today.  Customer had an HA pair of firewalls connecting this way to, gasp, Meraki stack switches.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8neok", "score_hidden": false, "stickied": false, "created": 1492166786.0, "created_utc": 1492137986.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 3}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8g5g6", "gilded": 0, "archived": false, "score": 17, "report_reasons": null, "author": "superspeck", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "We do this. We have a single uplink port to our provider at our data center. It goes in to our core switch on a specific untrusted VLAN. Then we connect to a HA pair of firewalls and a single out of band management machine on the same VLAN.\n\nIf our outside connection did not pass through four ports on our switches, we would instead need to rent three ports on the datacenter's switch and three wires from that switch to our switch. It's cheaper to have the ports on our side. \n\nThe only reason for the HA pair of firewalls with the single upstream provider is so that we can do upgrades during the day, and because it takes us longer to get new firewall equipment than it would for the datacenter that provides our internet connection to swap our port to a different switch. We're not serving web traffic or other critical services out of this data center, so we only have one upstream provider. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;We do this. We have a single uplink port to our provider at our data center. It goes in to our core switch on a specific untrusted VLAN. Then we connect to a HA pair of firewalls and a single out of band management machine on the same VLAN.&lt;/p&gt;\n\n&lt;p&gt;If our outside connection did not pass through four ports on our switches, we would instead need to rent three ports on the datacenter&amp;#39;s switch and three wires from that switch to our switch. It&amp;#39;s cheaper to have the ports on our side. &lt;/p&gt;\n\n&lt;p&gt;The only reason for the HA pair of firewalls with the single upstream provider is so that we can do upgrades during the day, and because it takes us longer to get new firewall equipment than it would for the datacenter that provides our internet connection to swap our port to a different switch. We&amp;#39;re not serving web traffic or other critical services out of this data center, so we only have one upstream provider. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8g5g6", "score_hidden": false, "stickied": false, "created": 1492156703.0, "created_utc": 1492127903.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 17}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8nhbg", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "s1nsp4wn", "parent_id": "t1_dg8fju9", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "The first one is common, but it's the second one I ran into that made me wonder.  Thanks!", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;The first one is common, but it&amp;#39;s the second one I ran into that made me wonder.  Thanks!&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8nhbg", "score_hidden": false, "stickied": false, "created": 1492166888.0, "created_utc": 1492138088.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8fju9", "gilded": 0, "archived": false, "score": 8, "report_reasons": null, "author": "supergeniusluie", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Two scenarios come to my mind:\n\nIf the firewall is connected to the carrier also, then probably general internet traffic comes in from the provider, through the firewall, and into the core.  The link that bypasses the firewall would be for the 'MPLS' - a separate WAN connection back to headquarters, or a data center, or some other site within the organization.  All of that traffic would be considered 'internal'.\n\nIf the firewall doesn't have a direct connection to the carrier, I would assume all traffic comes into the core switch, then some or all of it goes to the firewall and then back to the switch.  Maybe the firewall can't handle the needed routing functions, or the org just doesn't want it inline and only sends certain data through the firewall.\n\nThere are of course other possibilities, but that's the two I would use.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Two scenarios come to my mind:&lt;/p&gt;\n\n&lt;p&gt;If the firewall is connected to the carrier also, then probably general internet traffic comes in from the provider, through the firewall, and into the core.  The link that bypasses the firewall would be for the &amp;#39;MPLS&amp;#39; - a separate WAN connection back to headquarters, or a data center, or some other site within the organization.  All of that traffic would be considered &amp;#39;internal&amp;#39;.&lt;/p&gt;\n\n&lt;p&gt;If the firewall doesn&amp;#39;t have a direct connection to the carrier, I would assume all traffic comes into the core switch, then some or all of it goes to the firewall and then back to the switch.  Maybe the firewall can&amp;#39;t handle the needed routing functions, or the org just doesn&amp;#39;t want it inline and only sends certain data through the firewall.&lt;/p&gt;\n\n&lt;p&gt;There are of course other possibilities, but that&amp;#39;s the two I would use.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8fju9", "score_hidden": false, "stickied": false, "created": 1492155873.0, "created_utc": 1492127073.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 8}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8hkgb", "gilded": 0, "archived": false, "score": 6, "report_reasons": null, "author": "bbrown515", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Sounds like L2 Vlan for each ISP. HA pair in core matches HA pair for FW. No routing or IP on these vlans for security reasons. Logically it is a direct connection from ISP to Firewall, but with HA configured. If we are talking about the same thing that is.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Sounds like L2 Vlan for each ISP. HA pair in core matches HA pair for FW. No routing or IP on these vlans for security reasons. Logically it is a direct connection from ISP to Firewall, but with HA configured. If we are talking about the same thing that is.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8hkgb", "score_hidden": false, "stickied": false, "created": 1492158661.0, "created_utc": 1492129861.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 6}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8namd", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "s1nsp4wn", "parent_id": "t1_dg8jj0r", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Awesome explanation!  This makes a lot of sense.  At a base level, I did figure it's easy to just separate traffic with a vlan/vrf anyways, but figured it kinda odd given the security-crazed life we support these days.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Awesome explanation!  This makes a lot of sense.  At a base level, I did figure it&amp;#39;s easy to just separate traffic with a vlan/vrf anyways, but figured it kinda odd given the security-crazed life we support these days.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8namd", "score_hidden": false, "stickied": false, "created": 1492166621.0, "created_utc": 1492137821.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 2}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dga12ee", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "tolegittoshit2", "parent_id": "t1_dg8jj0r", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "this guy networks...", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;this guy networks...&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dga12ee", "score_hidden": false, "stickied": false, "created": 1492245862.0, "created_utc": 1492217062.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8jj0r", "gilded": 0, "archived": false, "score": 6, "report_reasons": null, "author": "thegreattriscuit", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "This changes things so that the logical topology of the network is no longer as deeply constrained by things like physical interfaces.  \n\nWhat if I want traffic to/from some networks (but not others) to bypass the firewall?\n... pass through an IPS?\n... pass through a WAN accelerator?\n\nInstead of having to cable separate physical paths for each of those three categories of traffic and the various combinations (IPS + FW, but not WAN Acc., etc...), you handle that through VLANS, VRFs, etc... \n\nAlso, even if you want all of your traffic to hit all three of those devices, they don't all scale to the same rates.  So maybe with the features you use they can handle:\n\nWAN Acc.: 80mbps\nFW: 150mbps\nIPS: 120mbps\n\nSo say you're about to upgrade from a 50mbps circuit to a 100mbps circuit. Suppose it's more economical to add another clustered WAN Accelerator than to rip/replace a new one.  If everything was in-line then you have to, at best, provision a new physical interface from the firewall and modify its configuration accordingly, and at worst (if you've ran out of physical interfaces on your FW) buy a second one and cluster them together.  And of course doing that would mean you need more interfaces on your IPS, etc... \n\nSimilarly you might say you need HA or clustering for your FW for redundancy, but your WAN Accelerator and IPS both \"fail open\" so you don't need it there.  If everything is in-line, you have no choice but to provision more interfaces and modify the configuration up and down the entire stack.  \n\nHairpinning stuff like this off of a robust switch (or switch fabric) is a good way to remove these limitations and dependencies.  \n\nEDIT:  I forgot a whole sentence.", "edited": 1492135203.0, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;This changes things so that the logical topology of the network is no longer as deeply constrained by things like physical interfaces.  &lt;/p&gt;\n\n&lt;p&gt;What if I want traffic to/from some networks (but not others) to bypass the firewall?\n... pass through an IPS?\n... pass through a WAN accelerator?&lt;/p&gt;\n\n&lt;p&gt;Instead of having to cable separate physical paths for each of those three categories of traffic and the various combinations (IPS + FW, but not WAN Acc., etc...), you handle that through VLANS, VRFs, etc... &lt;/p&gt;\n\n&lt;p&gt;Also, even if you want all of your traffic to hit all three of those devices, they don&amp;#39;t all scale to the same rates.  So maybe with the features you use they can handle:&lt;/p&gt;\n\n&lt;p&gt;WAN Acc.: 80mbps\nFW: 150mbps\nIPS: 120mbps&lt;/p&gt;\n\n&lt;p&gt;So say you&amp;#39;re about to upgrade from a 50mbps circuit to a 100mbps circuit. Suppose it&amp;#39;s more economical to add another clustered WAN Accelerator than to rip/replace a new one.  If everything was in-line then you have to, at best, provision a new physical interface from the firewall and modify its configuration accordingly, and at worst (if you&amp;#39;ve ran out of physical interfaces on your FW) buy a second one and cluster them together.  And of course doing that would mean you need more interfaces on your IPS, etc... &lt;/p&gt;\n\n&lt;p&gt;Similarly you might say you need HA or clustering for your FW for redundancy, but your WAN Accelerator and IPS both &amp;quot;fail open&amp;quot; so you don&amp;#39;t need it there.  If everything is in-line, you have no choice but to provision more interfaces and modify the configuration up and down the entire stack.  &lt;/p&gt;\n\n&lt;p&gt;Hairpinning stuff like this off of a robust switch (or switch fabric) is a good way to remove these limitations and dependencies.  &lt;/p&gt;\n\n&lt;p&gt;EDIT:  I forgot a whole sentence.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8jj0r", "score_hidden": false, "stickied": false, "created": 1492161334.0, "created_utc": 1492132534.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 6}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8njlr", "gilded": 0, "archived": false, "score": 4, "report_reasons": null, "author": "Azarias59", "parent_id": "t1_dg8n7be", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Best practice would be to use a switch in between even if you only have one, as it gives you an option to more easily add redundancy down the line.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Best practice would be to use a switch in between even if you only have one, as it gives you an option to more easily add redundancy down the line.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8njlr", "score_hidden": false, "stickied": false, "created": 1492166979.0, "created_utc": 1492138179.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 4}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8n7be", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "s1nsp4wn", "parent_id": "t1_dg8loqn", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "And this example makes perfect sense to me though costly.  Let the routing and huge bgp tables take place in front of the firewalls so they can focus on filtering, rules, etc.    Put the switch in between so you can manage everything and have redundancy.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;And this example makes perfect sense to me though costly.  Let the routing and huge bgp tables take place in front of the firewalls so they can focus on filtering, rules, etc.    Put the switch in between so you can manage everything and have redundancy.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8n7be", "score_hidden": false, "stickied": false, "created": 1492166487.0, "created_utc": 1492137687.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8loqn", "gilded": 0, "archived": false, "score": 5, "report_reasons": null, "author": "Azarias59", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "If you're using multiple firewalls, the benefits are pretty obvious (not having to pay for twice the number of circuits). Then, of course, if you end up using something like BGP you need to be using actual routers.\n\nAs long as you take steps to harden (or install IPS's on) the outside facing router(s) or switch(s), you should be good, as everything will have to be routed through the firewalls anyway.\n\nIn Cisco's recommended edge HA architecture you would have 2 Internet Routers running BGP -&gt; 2 L2 Switches -&gt; 2 Firewalls -&gt; Enterprise Network ... OR 2 Internet Routers running BGP -&gt; 2 L2 Switches -&gt; 2 Firewalls -&gt; 2 L2 Switches -&gt; another 2 Firewalls -&gt; Enterprise Network.\n\n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;If you&amp;#39;re using multiple firewalls, the benefits are pretty obvious (not having to pay for twice the number of circuits). Then, of course, if you end up using something like BGP you need to be using actual routers.&lt;/p&gt;\n\n&lt;p&gt;As long as you take steps to harden (or install IPS&amp;#39;s on) the outside facing router(s) or switch(s), you should be good, as everything will have to be routed through the firewalls anyway.&lt;/p&gt;\n\n&lt;p&gt;In Cisco&amp;#39;s recommended edge HA architecture you would have 2 Internet Routers running BGP -&amp;gt; 2 L2 Switches -&amp;gt; 2 Firewalls -&amp;gt; Enterprise Network ... OR 2 Internet Routers running BGP -&amp;gt; 2 L2 Switches -&amp;gt; 2 Firewalls -&amp;gt; 2 L2 Switches -&amp;gt; another 2 Firewalls -&amp;gt; Enterprise Network.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8loqn", "score_hidden": false, "stickied": false, "created": 1492164331.0, "created_utc": 1492135531.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 5}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg908bx", "gilded": 0, "archived": false, "score": 4, "report_reasons": null, "author": "soucy", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "This is very common and actually recommended if you have an appropriate switch.  Reasons may include (but not limited to):\n\n* A switch has a lower chance of failure than most firewalls\n* Provides the ability to have redundant firewalls connected\n* Provides the ability to test external connectivity to rule out the firewall in the event of a problem\n* Provides the ability to SPAN the uplink to an IDS for security purposes or do a packet capture for troubleshooting\n* Provides the ability to filter traffic in hardware before it reaches the firewall, e.g. DDoS (assuming hardware L3 PACL support)", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;This is very common and actually recommended if you have an appropriate switch.  Reasons may include (but not limited to):&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;A switch has a lower chance of failure than most firewalls&lt;/li&gt;\n&lt;li&gt;Provides the ability to have redundant firewalls connected&lt;/li&gt;\n&lt;li&gt;Provides the ability to test external connectivity to rule out the firewall in the event of a problem&lt;/li&gt;\n&lt;li&gt;Provides the ability to SPAN the uplink to an IDS for security purposes or do a packet capture for troubleshooting&lt;/li&gt;\n&lt;li&gt;Provides the ability to filter traffic in hardware before it reaches the firewall, e.g. DDoS (assuming hardware L3 PACL support)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg908bx", "score_hidden": false, "stickied": false, "created": 1492196320.0, "created_utc": 1492167520.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 4}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg99hh2", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "ravenze", "parent_id": "t1_dg8idxx", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "That's what I was thinking... reading the other responses, makes me question that I know anything anymore....", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;That&amp;#39;s what I was thinking... reading the other responses, makes me question that I know anything anymore....&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg99hh2", "score_hidden": false, "stickied": false, "created": 1492212034.0, "created_utc": 1492183234.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8idxx", "gilded": 0, "archived": false, "score": 3, "report_reasons": null, "author": "vlan-whisperer", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "The link that bypasses the firewall, which you're assuming is Internet, probably isn't.  It's probably a private MPLS WAN link, or a private point to point link, it's basically a LAN extension hosted by some carrier", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;The link that bypasses the firewall, which you&amp;#39;re assuming is Internet, probably isn&amp;#39;t.  It&amp;#39;s probably a private MPLS WAN link, or a private point to point link, it&amp;#39;s basically a LAN extension hosted by some carrier&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8idxx", "score_hidden": false, "stickied": false, "created": 1492159774.0, "created_utc": 1492130974.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 3}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8w7ec", "gilded": 0, "archived": false, "score": 3, "report_reasons": null, "author": "arghcisco", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "It's much safer to run public Internet traffic through a switch than most people think.  I usually call the public vlan 666 and as long as you don't put a SVI or any other L3 stuff on the vlan, it's perfectly safe.\n\nThe two main reasons I do it are:\n\n1) Maximize the number of things I can measure and control.  If the firewall connects directly to the ISP's service gear, I can't test both sides of that connection remotely for troubleshooting.\n\n2) I can do packet captures on the public interface to see if we're getting DDoSed or whatever.  The firewall could do that too, but generally the switch has hardware support for copying the packets, whereas the firewall almost certainly is going to do that in software.\n\nFor completeness, here's my checklist for making sure it's done right:\n\n* Disable DTP\n* Disable VTP/GARP/MVRP\n* Disable spanning tree\n* Enable SNMP traps for interfaces in the VLAN\n* Remove VLAN from MST region, if applicable\n* Null route external IP region in the switch's routing table\n* Set arp timeout to 0\n* \"logging event link-status\"\n* Set port description\n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;It&amp;#39;s much safer to run public Internet traffic through a switch than most people think.  I usually call the public vlan 666 and as long as you don&amp;#39;t put a SVI or any other L3 stuff on the vlan, it&amp;#39;s perfectly safe.&lt;/p&gt;\n\n&lt;p&gt;The two main reasons I do it are:&lt;/p&gt;\n\n&lt;p&gt;1) Maximize the number of things I can measure and control.  If the firewall connects directly to the ISP&amp;#39;s service gear, I can&amp;#39;t test both sides of that connection remotely for troubleshooting.&lt;/p&gt;\n\n&lt;p&gt;2) I can do packet captures on the public interface to see if we&amp;#39;re getting DDoSed or whatever.  The firewall could do that too, but generally the switch has hardware support for copying the packets, whereas the firewall almost certainly is going to do that in software.&lt;/p&gt;\n\n&lt;p&gt;For completeness, here&amp;#39;s my checklist for making sure it&amp;#39;s done right:&lt;/p&gt;\n\n&lt;ul&gt;\n&lt;li&gt;Disable DTP&lt;/li&gt;\n&lt;li&gt;Disable VTP/GARP/MVRP&lt;/li&gt;\n&lt;li&gt;Disable spanning tree&lt;/li&gt;\n&lt;li&gt;Enable SNMP traps for interfaces in the VLAN&lt;/li&gt;\n&lt;li&gt;Remove VLAN from MST region, if applicable&lt;/li&gt;\n&lt;li&gt;Null route external IP region in the switch&amp;#39;s routing table&lt;/li&gt;\n&lt;li&gt;Set arp timeout to 0&lt;/li&gt;\n&lt;li&gt;&amp;quot;logging event link-status&amp;quot;&lt;/li&gt;\n&lt;li&gt;Set port description&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8w7ec", "score_hidden": false, "stickied": false, "created": 1492183629.0, "created_utc": 1492154829.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 3}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dgdeend", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "sg4rb0sss", "parent_id": "t1_dgb3v2c", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "http://www.cisco.com/c/dam/en/us/td/docs/solutions/CVD/Aug2013/CVD-FirewallAndIPSDesignGuide-AUG13.pdf", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;&lt;a href=\"http://www.cisco.com/c/dam/en/us/td/docs/solutions/CVD/Aug2013/CVD-FirewallAndIPSDesignGuide-AUG13.pdf\"&gt;http://www.cisco.com/c/dam/en/us/td/docs/solutions/CVD/Aug2013/CVD-FirewallAndIPSDesignGuide-AUG13.pdf&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgdeend", "score_hidden": false, "stickied": false, "created": 1492459567.0, "created_utc": 1492430767.0, "depth": 2, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dgb3v2c", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "Norhell", "parent_id": "t1_dg8zcd3", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Hi, where did you get that from?  I've been searching for the modern CVD guide for enterprise internet edge; all I can find is a \"summary\" guide which is like 14 pages.  I have a full support account but not a partner account.  Are the CVD's no longer public?", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Hi, where did you get that from?  I&amp;#39;ve been searching for the modern CVD guide for enterprise internet edge; all I can find is a &amp;quot;summary&amp;quot; guide which is like 14 pages.  I have a full support account but not a partner account.  Are the CVD&amp;#39;s no longer public?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dgb3v2c", "score_hidden": false, "stickied": false, "created": 1492315795.0, "created_utc": 1492286995.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8zcd3", "gilded": 0, "archived": false, "score": 3, "report_reasons": null, "author": "sg4rb0sss", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Cost. If you look at the Cisco's Validated Design (CVD) documentation, this is not best practise. See this link \n\nhttp://imgur.com/a/Lxy75\n\nThe problem is the cost of additional outside switches.  If you've got 10 gig links to your internet, you're gonna have to buy a stack of 2 x10gig switches that potentially your core switches can already do.  It will be cheaper to buy a couple of 10 gig SFP's for your core switch that already has the 10 gig line cards available, and in a VSS.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Cost. If you look at the Cisco&amp;#39;s Validated Design (CVD) documentation, this is not best practise. See this link &lt;/p&gt;\n\n&lt;p&gt;&lt;a href=\"http://imgur.com/a/Lxy75\"&gt;http://imgur.com/a/Lxy75&lt;/a&gt;&lt;/p&gt;\n\n&lt;p&gt;The problem is the cost of additional outside switches.  If you&amp;#39;ve got 10 gig links to your internet, you&amp;#39;re gonna have to buy a stack of 2 x10gig switches that potentially your core switches can already do.  It will be cheaper to buy a couple of 10 gig SFP&amp;#39;s for your core switch that already has the 10 gig line cards available, and in a VSS.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8zcd3", "score_hidden": false, "stickied": false, "created": 1492193559.0, "created_utc": 1492164759.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 3}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8u20k", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "PE1NUT", "parent_id": "t1_dg8lgh4", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Good point, I've actually done that in the past, setting up a port mirror. Not because packet capture is still difficult, but because it often doesn't show what is actually being sent: due to hardware offloading, your TCPdump might show that you're sending IP packets of 64kB size, which your Ethernet card then turns into multiple smaller packets. So if you need to see the acks, the actual re-transmissions and strange IP options and the like, you must either disable all these acceleration options, or run your tap on a machine that is not part of the connection. And you might not want the extra load of running a packet capture on your firewall, or to mess with its offloading settings.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Good point, I&amp;#39;ve actually done that in the past, setting up a port mirror. Not because packet capture is still difficult, but because it often doesn&amp;#39;t show what is actually being sent: due to hardware offloading, your TCPdump might show that you&amp;#39;re sending IP packets of 64kB size, which your Ethernet card then turns into multiple smaller packets. So if you need to see the acks, the actual re-transmissions and strange IP options and the like, you must either disable all these acceleration options, or run your tap on a machine that is not part of the connection. And you might not want the extra load of running a packet capture on your firewall, or to mess with its offloading settings.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8u20k", "score_hidden": false, "stickied": false, "created": 1492178247.0, "created_utc": 1492149447.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 2}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8lgh4", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "butter_lover", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "in the bad old days it was pretty tough to get a packet capture for internet traffic off the firewall and taps were expensive single points of failure. This was a good way to get visibility into that traffic by just setting up a monitor port.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;in the bad old days it was pretty tough to get a packet capture for internet traffic off the firewall and taps were expensive single points of failure. This was a good way to get visibility into that traffic by just setting up a monitor port.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8lgh4", "score_hidden": false, "stickied": false, "created": 1492164003.0, "created_utc": 1492135203.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 2}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8y4kc", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "WendoNZ", "parent_id": "t1_dg8nxjl", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "It also gives you the ability to drop a VM onto the internet in front of your firewall assuming you have the IP space to test if your firewall is causing issues. \n\nThe reason one might want to do that for example, is if your firewall shows 20% CPU usage but is, for reasons not event he manufacturer can explain, limiting traffic by over 100Mb/s. DOn't ask me how I know :/", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;It also gives you the ability to drop a VM onto the internet in front of your firewall assuming you have the IP space to test if your firewall is causing issues. &lt;/p&gt;\n\n&lt;p&gt;The reason one might want to do that for example, is if your firewall shows 20% CPU usage but is, for reasons not event he manufacturer can explain, limiting traffic by over 100Mb/s. DOn&amp;#39;t ask me how I know :/&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8y4kc", "score_hidden": false, "stickied": false, "created": 1492189562.0, "created_utc": 1492160762.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8nxjl", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "Joe_bang_bus", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I never knew that was standard practice. My current employer does that, but in past places we could not do that for compliance reasons. ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I never knew that was standard practice. My current employer does that, but in past places we could not do that for compliance reasons. &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8nxjl", "score_hidden": false, "stickied": false, "created": 1492167556.0, "created_utc": 1492138756.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 2}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8nclp", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "s1nsp4wn", "parent_id": "t1_dg8hwnd", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "That's exactly what one example was.  A test lab router they used that bypassed the firewall.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;That&amp;#39;s exactly what one example was.  A test lab router they used that bypassed the firewall.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8nclp", "score_hidden": false, "stickied": false, "created": 1492166701.0, "created_utc": 1492137901.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8hwnd", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "jacksbox", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I've seen it done in the gaming industry in order to have some traffic flow through a consumer grade router (for testing upnp, etc - there are some requirements when testing games that can lead to interesting setups).\n\nWith transparent firewalls (Palo Alto vwire, etc) we prefer to pass these through the firewall now.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I&amp;#39;ve seen it done in the gaming industry in order to have some traffic flow through a consumer grade router (for testing upnp, etc - there are some requirements when testing games that can lead to interesting setups).&lt;/p&gt;\n\n&lt;p&gt;With transparent firewalls (Palo Alto vwire, etc) we prefer to pass these through the firewall now.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8hwnd", "score_hidden": false, "stickied": false, "created": 1492159121.0, "created_utc": 1492130321.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 2}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8knfy", "gilded": 0, "archived": false, "score": 2, "report_reasons": null, "author": "Skylis", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Its so you decouple physical infrastructure from logical. Using vlans you can place different deivces in the path if needed, do packet captures, etc.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Its so you decouple physical infrastructure from logical. Using vlans you can place different deivces in the path if needed, do packet captures, etc.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8knfy", "score_hidden": false, "stickied": false, "created": 1492162885.0, "created_utc": 1492134085.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 2}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8f5if", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "KingCrustacean", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "I know some orgs use this method to allow virtual or physical servers  to have an interface with a public IP.  It's probably not best practice but people are lazy.  ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;I know some orgs use this method to allow virtual or physical servers  to have an interface with a public IP.  It&amp;#39;s probably not best practice but people are lazy.  &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8f5if", "score_hidden": false, "stickied": false, "created": 1492155343.0, "created_utc": 1492126543.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 1}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8lvkm", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "Poulito", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Hotels do this many times.  Admin VLANs are behind the firewall and guest networks are behind a different gateway device.  This is usually fine, But occasionally in the meeting spaces, guests have special needs with equipment that doesn't play well with NAT and they need a straight-up public IP (video conference device, etc). So a L2-only transport VLAN is created which allows that public IP space to make its way over your infrastructure to the Ballroom IDF switches where it can be patched over to the particular port for that guest.    It's still isolated in a non-routed VLAN so there is no cross-over of trusted and untrusted networks.  ", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Hotels do this many times.  Admin VLANs are behind the firewall and guest networks are behind a different gateway device.  This is usually fine, But occasionally in the meeting spaces, guests have special needs with equipment that doesn&amp;#39;t play well with NAT and they need a straight-up public IP (video conference device, etc). So a L2-only transport VLAN is created which allows that public IP space to make its way over your infrastructure to the Ballroom IDF switches where it can be patched over to the particular port for that guest.    It&amp;#39;s still isolated in a non-routed VLAN so there is no cross-over of trusted and untrusted networks.  &lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8lvkm", "score_hidden": false, "stickied": false, "created": 1492164604.0, "created_utc": 1492135804.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 1}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": {"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8tte2", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "PE1NUT", "parent_id": "t1_dg8tpo4", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Perhaps they are using the switch simply as a media converter: the firewall might not have the fiber interface that they need to connect to the ISP. So you create a completely closed VLAN with just two ports: fiber port, and RJ-45 port to the firewall.\n\nAnd you hope that there's no VLAN hopping bugs in your switch (I've seen them in the past) and make sure you have VLAN learning etc. turned off on the switch.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Perhaps they are using the switch simply as a media converter: the firewall might not have the fiber interface that they need to connect to the ISP. So you create a completely closed VLAN with just two ports: fiber port, and RJ-45 port to the firewall.&lt;/p&gt;\n\n&lt;p&gt;And you hope that there&amp;#39;s no VLAN hopping bugs in your switch (I&amp;#39;ve seen them in the past) and make sure you have VLAN learning etc. turned off on the switch.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8tte2", "score_hidden": false, "stickied": false, "created": 1492177730.0, "created_utc": 1492148930.0, "depth": 1, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}, "user_reports": [], "id": "dg8tpo4", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "PE1NUT", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "One situation where you'd need this, is if you have very large data streams that would overwhelm your firewall. So the regular routed traffic goes through your firewall, and only one particular kind of traffic (filtered by a wire rate ACL) would make it out of that other port anyway. This is typically something that happens in large e-science setups, where you have huge dataflows that a regular CPU-based firewall cannot keep up with. Instead of buying a firewall that can handle that traffic, you divert that away from it.\n\nThe definition of what a 'huge dataflow' is has of course changed with the years. More than a decade ago, that might have been 1Gb/s, which nowadays is something a firewall appliance can keep up with. 10Gb/s firewalls are still a bit specialist, but if you have a 100Gb/s connection you'll find it hard to find a firewall.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;One situation where you&amp;#39;d need this, is if you have very large data streams that would overwhelm your firewall. So the regular routed traffic goes through your firewall, and only one particular kind of traffic (filtered by a wire rate ACL) would make it out of that other port anyway. This is typically something that happens in large e-science setups, where you have huge dataflows that a regular CPU-based firewall cannot keep up with. Instead of buying a firewall that can handle that traffic, you divert that away from it.&lt;/p&gt;\n\n&lt;p&gt;The definition of what a &amp;#39;huge dataflow&amp;#39; is has of course changed with the years. More than a decade ago, that might have been 1Gb/s, which nowadays is something a firewall appliance can keep up with. 10Gb/s firewalls are still a bit specialist, but if you have a 100Gb/s connection you&amp;#39;ll find it hard to find a firewall.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8tpo4", "score_hidden": false, "stickied": false, "created": 1492177507.0, "created_utc": 1492148707.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 1}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8xbny", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "beyondomega", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "To clarify, do you mean switch port 1 to firewall then to internet along with switch port 2 straight to internet?\n\nOr switch port 1 to firewall and then from firewall to internal network and switch port 2 to the internet?\n", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;To clarify, do you mean switch port 1 to firewall then to internet along with switch port 2 straight to internet?&lt;/p&gt;\n\n&lt;p&gt;Or switch port 1 to firewall and then from firewall to internal network and switch port 2 to the internet?&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8xbny", "score_hidden": false, "stickied": false, "created": 1492186945.0, "created_utc": 1492158145.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 1}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg8xs09", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "Skilldibop", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "Remote network provisioning + virtual moves and changes.\n\nBy having everything on your core switch you can redirect connections wherever you want. \n\nE.G I want to re-purpose one of my internal VMWare hosts as a DMZ VMWare host, I just reconfigure some VLANs and off I go. \nIf my DMZ was a separate pair of switches I'd have to physically go to the DC and re-patch things. In my case our DCs are 45 mins and over 2 hours from my normal office, so RTT + doing the bits on site is like 5 hours, that's written off more than half working day, most of it sat on a train or in a car doing nothing useful.  IF I can just wiggle some VLANs about in 15 mins instead my productivity is improved 2000%.", "edited": 1492159812.0, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;Remote network provisioning + virtual moves and changes.&lt;/p&gt;\n\n&lt;p&gt;By having everything on your core switch you can redirect connections wherever you want. &lt;/p&gt;\n\n&lt;p&gt;E.G I want to re-purpose one of my internal VMWare hosts as a DMZ VMWare host, I just reconfigure some VLANs and off I go. \nIf my DMZ was a separate pair of switches I&amp;#39;d have to physically go to the DC and re-patch things. In my case our DCs are 45 mins and over 2 hours from my normal office, so RTT + doing the bits on site is like 5 hours, that&amp;#39;s written off more than half working day, most of it sat on a train or in a car doing nothing useful.  IF I can just wiggle some VLANs about in 15 mins instead my productivity is improved 2000%.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg8xs09", "score_hidden": false, "stickied": false, "created": 1492188414.0, "created_utc": 1492159614.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 1}}, {"kind": "t1", "data": {"subreddit_id": "t5_2qkaf", "removal_reason": null, "link_id": "t3_658zc0", "likes": null, "replies": "", "user_reports": [], "id": "dg950uv", "gilded": 0, "archived": false, "score": 1, "report_reasons": null, "author": "beersykins", "parent_id": "t3_658zc0", "subreddit_name_prefixed": "r/networking", "controversiality": 0, "body": "This is common without being firewall specific.\n\nIt basically just boils down to moving a connection directly into a port out into it's own vlan instead.  Then you have a lot more flexibility for adding other devices into that segment by just tagging switch ports to that vlan.", "edited": false, "downs": 0, "body_html": "&lt;div class=\"md\"&gt;&lt;p&gt;This is common without being firewall specific.&lt;/p&gt;\n\n&lt;p&gt;It basically just boils down to moving a connection directly into a port out into it&amp;#39;s own vlan instead.  Then you have a lot more flexibility for adding other devices into that segment by just tagging switch ports to that vlan.&lt;/p&gt;\n&lt;/div&gt;", "subreddit": "networking", "name": "t1_dg950uv", "score_hidden": false, "stickied": false, "created": 1492206128.0, "created_utc": 1492177328.0, "depth": 0, "mod_reports": [], "subreddit_type": "public", "ups": 1}}], "after": null, "before": null}}]